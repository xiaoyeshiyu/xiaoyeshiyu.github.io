<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="S_5aoPFd3QQihrUOLiKdVR0Mj4fj6n6qJojwyjj9cAY">
  <meta name="baidu-site-verification" content="code-Onlniop0d6">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha256-/4UQcSmErDzPCMAiuOiWPVVsNN2s3ZY/NsmXNcj0IFc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.xiaoyeshiyu.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.15.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="这是学习MySQL的笔记DQL篇，主要是DML、DQL、DDL相关语句和操作。">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL学习笔记DQL篇">
<meta property="og:url" content="https://www.xiaoyeshiyu.com/2022/10/26/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0DQL%E7%AF%87/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="这是学习MySQL的笔记DQL篇，主要是DML、DQL、DDL相关语句和操作。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026144646173.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026144740379.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026144901753.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026152302085.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026163142058.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026164005394.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/11/image-20221110231910430.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221027121457432.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/modb_20220608_1aee8676-e70b-11ec-98dd-fa163eb4f6be.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/37c9d4c7-5609-4a62-8be6-d5cdc8bd441a-20221028133721207.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/6d439f64-b380-4750-9dfd-0fb007308291.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/11/2c37d86e-dcc8-4987-a3ba-6764894bace3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/1620-20221028140755161.png">
<meta property="article:published_time" content="2022-10-25T16:00:00.000Z">
<meta property="article:modified_time" content="2023-03-01T07:49:49.105Z">
<meta property="article:author" content="Mitaka xu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026144646173.png">


<link rel="canonical" href="https://www.xiaoyeshiyu.com/2022/10/26/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0DQL%E7%AF%87/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.xiaoyeshiyu.com/2022/10/26/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0DQL%E7%AF%87/","path":"2022/10/26/MySQL学习笔记DQL篇/","title":"MySQL学习笔记DQL篇"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>MySQL学习笔记DQL篇 | Hexo</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MBVJ11TVHH"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-MBVJ11TVHH","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?573725610fbc6ff9b42032bd13615370"></script>







  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">君子敬其在己者，而不慕其在天者，是以日进也。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>Commonweal 404</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">数据库概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.</span> <span class="nav-text">相关概念</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MySQL"><span class="nav-number">1.1.1.</span> <span class="nav-text">MySQL</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.2.</span> <span class="nav-text">关系型数据库管理系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.3.</span> <span class="nav-text">非关系型数据库管理系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RDBMS%E8%AE%BE%E8%AE%A1%E8%A7%84%E5%88%99"><span class="nav-number">1.4.</span> <span class="nav-text">RDBMS设计规则</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E3%80%81%E8%AE%B0%E5%BD%95%E3%80%81%E5%AD%97%E6%AE%B5"><span class="nav-number">1.4.1.</span> <span class="nav-text">表、记录、字段</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E7%9A%84%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB"><span class="nav-number">1.5.</span> <span class="nav-text">表的关联关系</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E8%81%94-one-to-one"><span class="nav-number">1.5.1.</span> <span class="nav-text">一对一关联 one-to-one</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB-one-to-many"><span class="nav-number">1.5.2.</span> <span class="nav-text">一对多关系 one-to-many</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB-many-to-many"><span class="nav-number">1.5.3.</span> <span class="nav-text">多对多关系 many-to-many</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E6%88%91%E5%BC%95%E7%94%A8-self-reference"><span class="nav-number">1.5.4.</span> <span class="nav-text">自我引用 self-reference</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E5%AE%89%E8%A3%85"><span class="nav-number">2.</span> <span class="nav-text">MySQL安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL%E6%A6%82%E8%BF%B0"><span class="nav-number">3.</span> <span class="nav-text">SQL概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="nav-number">3.1.</span> <span class="nav-text">SQL语法规范</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="nav-number">4.</span> <span class="nav-text">查询语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="nav-number">4.1.</span> <span class="nav-text">基本的查询语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">4.2.</span> <span class="nav-text">过滤数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">5.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">5.1.</span> <span class="nav-text">算数运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">5.2.</span> <span class="nav-text">比较运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">5.3.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">5.4.</span> <span class="nav-text">位运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%88%86%E9%A1%B5"><span class="nav-number">6.</span> <span class="nav-text">排序与分页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.</span> <span class="nav-text">多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="nav-number">7.1.</span> <span class="nav-text">等值连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="nav-number">7.2.</span> <span class="nav-text">非等值连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="nav-number">7.3.</span> <span class="nav-text">自连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">7.4.</span> <span class="nav-text">内连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">7.5.</span> <span class="nav-text">外连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C"><span class="nav-number">7.6.</span> <span class="nav-text">合并查询结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7%E4%B8%ADSQL-JOINS%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">7.7.</span> <span class="nav-text">7中SQL JOINS的实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL-99%E8%AF%AD%E6%B3%95%E6%96%B0%E7%89%B9%E6%80%A7"><span class="nav-number">7.8.</span> <span class="nav-text">SQL 99语法新特性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="nav-number">8.</span> <span class="nav-text">单行函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0"><span class="nav-number">8.1.</span> <span class="nav-text">基本函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">8.2.</span> <span class="nav-text">字符串函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4"><span class="nav-number">8.3.</span> <span class="nav-text">日期和时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="nav-number">8.4.</span> <span class="nav-text">流程控制函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86"><span class="nav-number">8.5.</span> <span class="nav-text">加密和解密</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0"><span class="nav-number">8.6.</span> <span class="nav-text">其他函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">9.</span> <span class="nav-text">聚合函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">9.1.</span> <span class="nav-text">常见的聚合函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GROUP-BY"><span class="nav-number">9.2.</span> <span class="nav-text">GROUP BY</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HAVING"><span class="nav-number">9.3.</span> <span class="nav-text">HAVING</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.1.</span> <span class="nav-text">单行子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.2.</span> <span class="nav-text">多行子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.3.</span> <span class="nav-text">相关子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EXISTS-%E5%92%8C-NOT-EXISTS"><span class="nav-number">10.4.</span> <span class="nav-text">EXISTS 和 NOT EXISTS</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E7%AE%A1%E7%90%86%E8%A1%A8"><span class="nav-number">11.</span> <span class="nav-text">创建和管理表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">11.1.</span> <span class="nav-text">创建和管理数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">11.2.</span> <span class="nav-text">数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="nav-number">11.3.</span> <span class="nav-text">创建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="nav-number">11.4.</span> <span class="nav-text">修改表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%85%E7%A9%BA%E8%A1%A8%E6%95%B0%E6%8D%AE%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94"><span class="nav-number">11.4.1.</span> <span class="nav-text">清空表数据的两种方式对比</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A2%9E%E5%88%A0%E6%94%B9"><span class="nav-number">12.</span> <span class="nav-text">增删改</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A2%9E%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="nav-number">12.1.</span> <span class="nav-text">增加数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="nav-number">12.2.</span> <span class="nav-text">更新数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">12.3.</span> <span class="nav-text">删除数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">12.4.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL-8%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%9A%E8%AE%A1%E7%AE%97%E5%88%97"><span class="nav-number">12.5.</span> <span class="nav-text">MySQL 8新特性：计算列</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-1"><span class="nav-number">13.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="nav-number">13.1.</span> <span class="nav-text">数值类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="nav-number">13.2.</span> <span class="nav-text">日期和时间类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="nav-number">13.3.</span> <span class="nav-text">字符串类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B"><span class="nav-number">13.4.</span> <span class="nav-text">枚举类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%80%BB%E7%BB%93"><span class="nav-number">13.5.</span> <span class="nav-text">数据类型总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.</span> <span class="nav-text">约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.1.</span> <span class="nav-text">非空约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.2.</span> <span class="nav-text">唯一性约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.3.</span> <span class="nav-text">主键约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%A2%9E%E5%88%97"><span class="nav-number">14.4.</span> <span class="nav-text">自增列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.5.</span> <span class="nav-text">外键约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F%E7%AD%89%E7%BA%A7"><span class="nav-number">14.5.1.</span> <span class="nav-text">约束等级</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">14.5.2.</span> <span class="nav-text">使用场景</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.6.</span> <span class="nav-text">检查约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E5%80%BC%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.7.</span> <span class="nav-text">默认值约束</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mitaka xu"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Mitaka xu</p>
  <div class="site-description" itemprop="description">保持积累，保持学习。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">81</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">66</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/xiaoyeshiyu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiaoyeshiyu" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.xiaoyeshiyu.com/2022/10/26/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0DQL%E7%AF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mitaka xu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="保持积累，保持学习。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="MySQL学习笔记DQL篇 | Hexo">
      <meta itemprop="description" content="这是学习MySQL的笔记DQL篇，主要是DML、DQL、DDL相关语句和操作。">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL学习笔记DQL篇
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-10-26 00:00:00" itemprop="dateCreated datePublished" datetime="2022-10-26T00:00:00+08:00">2022-10-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-03-01 15:49:49" itemprop="dateModified" datetime="2023-03-01T15:49:49+08:00">2023-03-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/databse/" itemprop="url" rel="index"><span itemprop="name">databse</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/databse/develope/" itemprop="url" rel="index"><span itemprop="name">develope</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/databse/develope/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
    <span id="/2022/10/26/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0DQL%E7%AF%87/" class="post-meta-item leancloud_visitors" data-flag-title="MySQL学习笔记DQL篇" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan: </span>
    
    <a title="MySQL学习笔记DQL篇" href="/2022/10/26/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0DQL%E7%AF%87/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::52dafd3b449c50b00b756d770f65b90e" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

            <div class="post-description">这是学习MySQL的笔记DQL篇，主要是DML、DQL、DDL相关语句和操作。</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="数据库概述"><a href="#数据库概述" class="headerlink" title="数据库概述"></a>数据库概述</h2><p>使用数据库的原因是需要将数据保存到磁盘上，做持久化存储，对于有一些有关系型的数据，为了方便后续查找，更加适合存储在数据库中。</p>
<h3 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h3><ul>
<li>DB：Database，数据库，存储数据的仓库，本质是一个文件系统，保存了一些列有组织的数据。</li>
<li>DBMS：Database Management System，数据库管理系统，是操作和管理数据库的软件，用户通过DBMS访问数据库中表内的数据。</li>
<li>SQL：Structured Query Language，结构化查询语言，专门用来与数据库通信的语言。</li>
</ul>
<p>DB和DBMS的关系，DB类似于一个文件，DBMS则是用于操作这个文件的软件。</p>
<img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026144646173.png" alt="image-20221026144646173"  />

<img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026144740379.png" alt="image-20221026144740379" style="zoom:150%;" />

<p>数据库管理系统排名</p>
<p><a target="_blank" rel="noopener" href="https://db-engines.com/en/ranking">https://db-engines.com/en/ranking</a></p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026144901753.png" alt="image-20221026144901753"></p>
<h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><p>MySQL是一个<strong>开源的关系型数据库管理系统</strong>，MySQL支持大型数据库，支持5000万条记录的数据仓库，32位系统表文件最大可支持4GB，64位操作系统最大的表文件为8TB。MySQL使用标准的SQL数据语言。</p>
<h3 id="关系型数据库管理系统"><a href="#关系型数据库管理系统" class="headerlink" title="关系型数据库管理系统"></a>关系型数据库管理系统</h3><p>关系型数据库RDBMS：把复杂的数据结构归结为简单的二元关系，即二维表格形式。</p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026152302085.png" alt="image-20221026152302085"></p>
<p>关系型数据库以**行<code>row</code><strong>和</strong>列<code>column</code><strong>的形式存储数据，以便于用户理解，这一系列的行和列被称为</strong>表<code>table</code>**，一组表组成了一个库<code>database</code>。</p>
<p>表与表之间的数据记录有<strong>关系<code>relationship</code><strong>，各种实体及实体之间的各种联系均用</strong>关系模型</strong>来表示。<strong>关系型数据库</strong>，就是建立在<strong>关系模型</strong>基础上的数据库。</p>
<p>关系型数据库的优势：</p>
<ul>
<li>复杂查询：用SQL语句方便的在一个表以及多个表之间做非常复杂的数据查询</li>
<li>事务支持</li>
</ul>
<h3 id="非关系型数据库管理系统"><a href="#非关系型数据库管理系统" class="headerlink" title="非关系型数据库管理系统"></a>非关系型数据库管理系统</h3><p>非关系型数据库，可看成传统关系型数据库的功能<strong>阉割版本</strong>，基于键值对存储数据，不需要经过SQL层的解析，<strong>性能非常高</strong>。减少不常用的功能，进一步提高性能。</p>
<p>非关系型数据库：</p>
<ul>
<li>键值型数据库：通过<code>Key-Value</code>键值的方式存储数据，其中<code>Key</code>和<code>Value</code>可以是简单的对象，也可以是复杂的对象。<code>Key</code>作为唯一标识符，优点是查找速度快，缺点是无法使用条件过滤，如果要查找数据，则需要便利所有的键，会消耗大量计算。键值型数据库典型应用场景是作为<strong>内存缓存</strong>。Redis是最流行的键值型数据库。</li>
<li>文档型数据库：在数据库中文档作为处理信息的基本单位，一个文档就相当于一条记录。文档数据库存放的文档，相当于键值数据库存放的值。MongoDB是最流行的文档数据库。</li>
<li>搜索引擎数据库：关系型数据库采用了索引提升检索效率，但是<strong>针对全文索引</strong>效率较低。搜索引擎数据库时应用在搜索引擎领域的数据存储形式，由于搜索引擎会爬取大量的数据，并以特定的格式进行存储，这样在检索的时候才能保证性能最优。核心原理是“倒排索引”。例如Elasticsearch，Solr，Splunk等。</li>
<li>列式数据库：列式数据库时相当于行式存储的数据库，Oracle、MySQL等数据库采用的是行式存储（Row-based）， 而列式数据库时将数据按照列存储到数据库中，好处是大量降低系统的I&#x2F;O，适合于分布式文件系统，不足在于功能相对有限。例如HBase等</li>
</ul>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026163142058.png" alt="image-20221026163142058"></p>
<ul>
<li>图形数据库：利用图这种数据结构存储了实体之间的关系。最典型的例子就是社交网络中人与人的关系，数据模型主要是以节点（对象）和边（关系）来实现，特点在于能高效的解决复杂的关系问题。例如Neo4J等。</li>
</ul>
<p>NoSQL（not only SQL）对SQL做出了很好的补充，在一些不需要完整的关系型数据库功能中，使用性能更高、成本更低的非关系型数据库效果更好，例如日志收集、排行榜、定时器等。</p>
<h3 id="RDBMS设计规则"><a href="#RDBMS设计规则" class="headerlink" title="RDBMS设计规则"></a>RDBMS设计规则</h3><ul>
<li>关系型数据库的典型数据结构就是<strong>数据表</strong>，这些数据表的组成都是结构化的</li>
<li>将数据放到表中，表再放到库中</li>
<li>一个数据库中可以有多个表，每个表都有一个名字，用来标识自己，表名具有唯一性</li>
<li>表具有一些特性，这些特性定义了数据在表中如何存储，类似Java和Python中的类的设计，Go中结构体的设计。</li>
</ul>
<h4 id="表、记录、字段"><a href="#表、记录、字段" class="headerlink" title="表、记录、字段"></a>表、记录、字段</h4><ul>
<li><p>E-R（entity-relationship，实体-联系）模型中有三个主要概念：<strong>实体集</strong>、<strong>属性</strong>、<strong>联系集</strong></p>
</li>
<li><p>一个实体集<code>class</code>对应于数据库中的一个表，一个实体则对应于数据库表中的一行<code>row</code>，也成为一条记录<code>record</code>。一个属性对应于数据库表中的一列<code>column</code>，也称为一个字段<code>field</code></p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221026164005394.png" alt="image-20221026164005394"></p>
</li>
</ul>
<h3 id="表的关联关系"><a href="#表的关联关系" class="headerlink" title="表的关联关系"></a>表的关联关系</h3><p>表和表之间的数据有关系<code>relationship</code>，分为一对一关联、一对多关联、多对对关联、自我引用。</p>
<h4 id="一对一关联-one-to-one"><a href="#一对一关联-one-to-one" class="headerlink" title="一对一关联 one-to-one"></a>一对一关联 one-to-one</h4><p>表A中的一个记录对应表B中的一个记录，一一对应。</p>
<p>例如将学生信息拆分成基础信息表和档案信息表，这两个表的记录是一一对应：</p>
<ul>
<li>基础信息表：保存常用信息，例如学号、姓名、电话号码、班级等</li>
<li>档案信息表：保存不常用信息，例如学号、身份证号、家庭住址等</li>
</ul>
<p>两种建表原则：</p>
<ul>
<li>外键唯一：主表的主键和从表外键（唯一），形成主外键关系，外键唯一。</li>
<li>外键是主键：主表的主键和从表的主键，形成住外键关系。</li>
</ul>
<h4 id="一对多关系-one-to-many"><a href="#一对多关系-one-to-many" class="headerlink" title="一对多关系 one-to-many"></a>一对多关系 one-to-many</h4><p>表A中的一个记录，对应表B中的多个记录。</p>
<p>例如用户表和订单表，部门表和员工表</p>
<p>建表原则：</p>
<ul>
<li>在从表（多方）创建一个字段，字段作为外键指向主表（一方）的主键</li>
</ul>
<h4 id="多对多关系-many-to-many"><a href="#多对多关系-many-to-many" class="headerlink" title="多对多关系 many-to-many"></a>多对多关系 many-to-many</h4><p>要表示多对多关系，必须创建第三张表，该表通常称为<strong>联接表</strong>，将多对多关系划分为两个一对多关系，将这两个表的主键都插入到第三张表中。</p>
<p>例如学生信息表和课程信息表，一个学生可以选择多门课程，一门课程中有很多学生，则需要一张选课信息表，记录学生学号和课程编号，形成多对多。 </p>
<h4 id="自我引用-self-reference"><a href="#自我引用-self-reference" class="headerlink" title="自我引用 self-reference"></a>自我引用 self-reference</h4><p>表A中某一个字段，需要引用同表中的一个字段，例如用户表中有上下级关系，上级需要引用同表中的另外一个用户。</p>
<h2 id="MySQL安装"><a href="#MySQL安装" class="headerlink" title="MySQL安装"></a>MySQL安装</h2><p>见官网：<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/mysql-installation-excerpt/8.0/en/">MySQL 8安装手册</a></p>
<p>MySQL四大版本</p>
<ul>
<li><code>MySQL Community Server</code> 社区版本，开源免费，自由下载，但不提供官方技术支持，适用于大多数普通用户</li>
<li><code>MySQL Enterprise Edition</code> 企业版本，需付费，不能在线下载，可以试用30天。</li>
<li><code>MySQL Cluster</code> 集群版，开源免费，用于架设集群服务器，将几个MySQL Server封装成一个Server，需要在社区版或企业版的基础上使用</li>
<li><code>MySQL Cluster CGE</code> 高级集群版，需要付费</li>
</ul>
<p>这里使用容器版本，学习使用更加简单</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Ps：如果是<code>Linux</code>上通过<code>rpm</code>包安装，则需要通过<code>systemctl start mysqld</code>启动服务，以及初始化过程中通过默认临时密码登录，以及修改用户密码。使用时需要注意防火墙以及<code>SELinux</code>。</p>
</blockquote>
<p>由于学习使用，没有映射目录出来，仅仅将<code>3306</code>端口映射出来，可通过客户端连接。</p>
<p>另外，由于默认情况下，使用的<code>localhost</code>，因此可能出现远程连接报错的情况，一般有两种情况。</p>
<ol>
<li><p>由于用户在远程主机上登录没有权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> root@<span class="operator">%</span> IDENTIFIED <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>; <span class="comment">-- 新创建一个任何远程主机上都可以登录的用户</span></span><br><span class="line">flush privileges;														<span class="comment">-- 刷新权限</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>提示错误号码 <code>2058</code></p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/11/image-20221110231910430.png" alt="image-20221110231910430"></p>
</li>
</ol>
<p>​	在MySQL 8版本中，更新了密码加密方式，解决方法是通过root登录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="operator">-</span>h127<span class="number">.0</span><span class="number">.0</span><span class="number">.1</span> <span class="operator">-</span>P3306 <span class="operator">-</span>uroot <span class="operator">-</span>p123456</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">with</span> mysql_native_password <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>密码强度插件如果启用，可能由于密码123456太过简单报错。</p>
<p>插件配置信息在配置文件 <code>/etc/my.cnf</code> 中，也可以通过命令查看插件 <code>SELECT * FROM mysql.component;</code>，以及 <code>SHOW VARIABLES LIKE &#39;%validate_password%&#39;;</code></p>
<p>更多相关插件操作，<a target="_blank" rel="noopener" href="https://blog.csdn.net/kk185800961/article/details/79447754">MySQL 插件安装或卸载</a></p>
</blockquote>
<p>创建表时需要注意，如果没有指定字符集，则会使用默认字符集，如果默认字符集不是utf8，则无法存储中文。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;character_%&#x27;</span>; 	<span class="operator">/</span><span class="operator">/</span> 查看字符集配置</span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;collation_%&#x27;</span>;	<span class="operator">/</span><span class="operator">/</span> 查看排序规则配置（在不同的字符集下比较规则）</span><br></pre></td></tr></table></figure>

<h2 id="SQL概述"><a href="#SQL概述" class="headerlink" title="SQL概述"></a>SQL概述</h2><p>SQL，Structured Query Language，结构化查询语言是一门语言，在功能上，主要分为3大类：</p>
<ul>
<li>DDL：Data Definition Language，数据定义语言：定义数据库、表、视图、索引等数据库对象，还可以用来创建、删除、修改数据库和数据表的结构。关键字：<code>CREATE</code>、<code>DROP</code>、<code>ALTER</code>等</li>
<li>DCL：Data Control Language，数据控制语言：用于定义数据库、表、字段、用户的访问权限和安全级别，关键字：<code>GRANT</code>、<code>REVOKE</code>、<code>COMMIT</code>、<code>ROLLBACK</code>、<code>SAVEPOINT</code>等</li>
<li>DML：Data Manipulation Language，数据操作语言：用于添加、删除、更新和查询数据库记录，并检查数据完整性。关键字：<code>INSERT</code>、<code>DELETE</code>、<code>UPDATE</code>、<code>SELECT</code></li>
</ul>
<blockquote>
<p>因为查询语句使用频繁，有些地方把查询语言单独作为一类，DQL，Data Query Language， 数据查询语言。</p>
<p>以及单独将COMMIT、ROLLBACK取出来作为一类TCL，Transaction Control Language，事务控制语言。</p>
</blockquote>
<h3 id="SQL语法规范"><a href="#SQL语法规范" class="headerlink" title="SQL语法规范"></a>SQL语法规范</h3><p>基本规则</p>
<ul>
<li><p>SQL可以在一行或者多行，为了提高可读性，各自居分行写，必要时使用缩进</p>
</li>
<li><p>每条命令以<code>;</code>或<code>\g</code>或<code>\G</code>结束</p>
<p>三者区别：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"># 使用 ;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> goods;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span> <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                                                                                                                                     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> goods <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `goods` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `number` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_0900_ai_ci <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"># 使用 \g</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> goods\g</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span> <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                                                                                                                                     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> goods <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `goods` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `number` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_0900_ai_ci <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"># 使用 \G</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> goods\G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">       <span class="keyword">Table</span>: goods</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `goods` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `number` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_0900_ai_ci</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<p>使用 <code>;</code>和 <code>\g</code>一样，结果是按照列显示，但是是用 <code>\G</code>会变成行显示。</p>
</li>
<li><p>关键字不能被缩写也不能换行</p>
</li>
<li><p>字符串、日期时间类型的变量需要使用一对单引号 <code>&#39;&#39;</code>表示</p>
</li>
<li><p>列的别名，尽量使用双引号 <code>&quot;&quot;</code>表示</p>
</li>
</ul>
<p>SQL编码建议</p>
<ul>
<li><p>在Windows下大小写不敏感</p>
</li>
<li><p>在Linux下大小写敏感</p>
<ul>
<li>数据库名、表名、表别名、变量名严格区分大小写</li>
<li>关键字、函数名、列名（或字段名）、列的别名（字段的别名）是忽略大小写的</li>
</ul>
</li>
<li><p>建议采用统一规范</p>
<ul>
<li>数据库名、表名、表别名、字段名、字段别名等都用小写</li>
<li>SQL关键字、函数名、绑定变量等都大写</li>
</ul>
</li>
</ul>
<p>更多规范，可查看阿里巴巴Java开发手册：<a target="_blank" rel="noopener" href="https://ucc.alicdn.com/download/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C1.4.0.pdf?spm=a2c6h.14059151.J_1371197.5.5a195738ptnJMb&file=%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C1.4.0.pdf">MySQL 数据库 </a>：</p>
<ul>
<li>单行注释，使用 <code>#</code>，或者使用 <code>-- </code>，<code>-- </code>后有一个空格</li>
<li>多行注释，使用 <code>/* ... */</code></li>
</ul>
<h2 id="查询语句"><a href="#查询语句" class="headerlink" title="查询语句"></a>查询语句</h2><p>数据准备</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"># 学生表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Student(SId <span class="type">varchar</span>(<span class="number">10</span>),Sname <span class="type">varchar</span>(<span class="number">10</span>),Sage datetime,Ssex <span class="type">varchar</span>(<span class="number">10</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;赵雷&#x27;</span> , <span class="string">&#x27;1990-01-01&#x27;</span> , <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;钱电&#x27;</span> , <span class="string">&#x27;1990-12-21&#x27;</span> , <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;孙风&#x27;</span> , <span class="string">&#x27;1990-12-20&#x27;</span> , <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;04&#x27;</span> , <span class="string">&#x27;李云&#x27;</span> , <span class="string">&#x27;1990-12-06&#x27;</span> , <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;05&#x27;</span> , <span class="string">&#x27;周梅&#x27;</span> , <span class="string">&#x27;1991-12-01&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;06&#x27;</span> , <span class="string">&#x27;吴兰&#x27;</span> , <span class="string">&#x27;1992-01-01&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;07&#x27;</span> , <span class="string">&#x27;郑竹&#x27;</span> , <span class="string">&#x27;1989-01-01&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;09&#x27;</span> , <span class="string">&#x27;张三&#x27;</span> , <span class="string">&#x27;2017-12-20&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;10&#x27;</span> , <span class="string">&#x27;李四&#x27;</span> , <span class="string">&#x27;2017-12-25&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;11&#x27;</span> , <span class="string">&#x27;李四&#x27;</span> , <span class="string">&#x27;2012-06-06&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;12&#x27;</span> , <span class="string">&#x27;赵六&#x27;</span> , <span class="string">&#x27;2013-06-13&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;13&#x27;</span> , <span class="string">&#x27;孙七&#x27;</span> , <span class="string">&#x27;2014-06-01&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"></span><br><span class="line"># 科目表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Course(CId <span class="type">varchar</span>(<span class="number">10</span>),Cname nvarchar(<span class="number">10</span>),TId <span class="type">varchar</span>(<span class="number">10</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;语文&#x27;</span> , <span class="string">&#x27;02&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;数学&#x27;</span> , <span class="string">&#x27;01&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;英语&#x27;</span> , <span class="string">&#x27;03&#x27;</span>);</span><br><span class="line"></span><br><span class="line"># 教师表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Teacher(TId <span class="type">varchar</span>(<span class="number">10</span>),Tname <span class="type">varchar</span>(<span class="number">10</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;李四&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;王五&#x27;</span>);</span><br><span class="line"></span><br><span class="line"># 成绩表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> SC(SId <span class="type">varchar</span>(<span class="number">10</span>),CId <span class="type">varchar</span>(<span class="number">10</span>),score <span class="type">decimal</span>(<span class="number">18</span>,<span class="number">1</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="number">90</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="number">99</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="number">70</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="number">60</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;04&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="number">50</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;04&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;04&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;05&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="number">76</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;05&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="number">87</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;06&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="number">31</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;06&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="number">34</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;07&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="number">89</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC <span class="keyword">values</span>(<span class="string">&#x27;07&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="number">98</span>);</span><br><span class="line"></span><br><span class="line"># 成绩等级表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> score_grades(grade_level <span class="type">varchar</span>(<span class="number">10</span>),lowest_sal <span class="type">decimal</span>(<span class="number">18</span>,<span class="number">1</span>),highest_sal <span class="type">decimal</span>(<span class="number">18</span>,<span class="number">1</span>));</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> score_grades <span class="keyword">VALUES</span>(<span class="string">&#x27;A&#x27;</span> , <span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> score_grades <span class="keyword">VALUES</span>(<span class="string">&#x27;B&#x27;</span> , <span class="number">60</span>,<span class="number">79</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> score_grades <span class="keyword">VALUES</span>(<span class="string">&#x27;C&#x27;</span> , <span class="number">40</span>,<span class="number">59</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> score_grades <span class="keyword">VALUES</span>(<span class="string">&#x27;D&#x27;</span> , <span class="number">0</span>,<span class="number">39</span>);</span><br></pre></td></tr></table></figure>

<p>更多练习操作数据：</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/lzjcnb/test_db">https://gitee.com/lzjcnb/test_db</a></p>
<p><a target="_blank" rel="noopener" href="https://resources.oreilly.com/examples/9780596007270">Learning SQL</a></p>
<h3 id="基本的查询语句"><a href="#基本的查询语句" class="headerlink" title="基本的查询语句"></a>基本的查询语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">SELECT</span> 字段<span class="number">1</span>，字段<span class="number">2</span>，... <span class="keyword">FROM</span> 表名</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span>;  </span><br><span class="line"><span class="operator">+</span><span class="comment">---+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span><span class="operator">+</span><span class="number">1</span>,<span class="number">3</span><span class="operator">*</span><span class="number">2</span> <span class="keyword">FROM</span> DUAL; # DUAL：伪表</span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-----+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span><span class="operator">+</span><span class="number">1</span> <span class="operator">|</span> <span class="number">3</span><span class="operator">*</span><span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-----+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">2</span> <span class="operator">|</span>   <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-----+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"># <span class="keyword">SELECT</span> <span class="operator">*</span> 查询所有字段</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">09</span>   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span>   <span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">13</span>   <span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 获取某一行</span></span><br><span class="line"><span class="keyword">SELECT</span> Sname,Sage <span class="keyword">FROM</span> Student;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------------------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列的别名，通过空格加上别名,或者通过as（alias，可以省略），或者使用双引号</span></span><br><span class="line"><span class="keyword">SELECT</span> Sname my_name,Sage <span class="keyword">AS</span> my_age,Ssex &quot;my_sex&quot; <span class="keyword">FROM</span> Student;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> my_name <span class="operator">|</span> my_age              <span class="operator">|</span> my_sex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> 赵雷    <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电    <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风    <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云    <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 周梅    <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 吴兰    <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 郑竹    <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 张三    <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李四    <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李四    <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 赵六    <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙七    <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------------------+--------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 去除重复行</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Ssex <span class="keyword">FROM</span> Student;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"> <span class="comment">-- 错误去重</span></span><br><span class="line"><span class="keyword">SELECT</span> Sage,<span class="keyword">DISTINCT</span> Ssex <span class="keyword">FROM</span> Student;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;DISTINCT Ssex FROM Student&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br><span class="line"><span class="comment">-- 将两个字段一起去重</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Sage, Ssex <span class="keyword">FROM</span> Student;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 空值</span></span><br><span class="line"><span class="comment">-- 空值：null</span></span><br><span class="line"><span class="comment">-- null 不等于0，&#x27;&#x27;，&#x27;null&#x27;</span></span><br><span class="line"><span class="comment">-- 空值参与计算：结果一定为空</span></span><br><span class="line"><span class="keyword">SELECT</span> Sid,Cid,Score <span class="operator">*</span> <span class="number">10</span> <span class="keyword">as</span> all_score <span class="keyword">FROM</span> SC;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> Sid  <span class="operator">|</span> Cid  <span class="operator">|</span> all_score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">900.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">990.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">700.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">600.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">500.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">300.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">200.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">760.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">870.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">310.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">340.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">890.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">980.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">08</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>      <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-----------+</span></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 如果是空值，则作为0进行计算，结果就不是空</span></span><br><span class="line"><span class="keyword">SELECT</span> Sid,Cid,IFNULL(Score,<span class="number">0</span>) <span class="operator">*</span> <span class="number">10</span> <span class="keyword">as</span> all_score <span class="keyword">FROM</span> SC;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> Sid  <span class="operator">|</span> Cid  <span class="operator">|</span> all_score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">900.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">990.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">700.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">600.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">800.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">500.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">300.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">200.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">760.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">870.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>     <span class="number">310.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">340.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>     <span class="number">890.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>     <span class="number">980.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">08</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>       <span class="number">0.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-----------+</span></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询常数</span></span><br><span class="line"><span class="comment">-- 常数是不存在于表中的数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;小学&#x27;</span>,Sname,Sage <span class="keyword">FROM</span> Student;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小学   <span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+---------------------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示表结果</span></span><br><span class="line"><span class="keyword">DESCRIBE</span> Student; # 显示表中字段的详细信息</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> SId   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Sname <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Sage  <span class="operator">|</span> datetime    <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Ssex  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">DESC</span> Student;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> SId   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Sname <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Sage  <span class="operator">|</span> datetime    <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Ssex  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="过滤数据"><a href="#过滤数据" class="headerlink" title="过滤数据"></a>过滤数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询满足某个条件的数据</span></span><br><span class="line"><span class="comment">-- FROM 过滤条件在FROM后面</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> SSex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>; # 列名大小写不敏感</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sage <span class="operator">&gt;</span> <span class="string">&#x27;1990-1-20&#x27;</span> <span class="keyword">AND</span> Ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>列的别名无法作为条件</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sage,Ssex <span class="keyword">as</span> my_sex <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> my_sex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">ERROR <span class="number">1054</span> (<span class="number">42</span>S22): <span class="literal">Unknown</span> <span class="keyword">column</span> <span class="string">&#x27;my_sex&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;where clause&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>运算符用于算术、比较、逻辑、位运算</p>
<h3 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 算术运算符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span>,<span class="number">100</span><span class="operator">+</span><span class="number">0</span>,<span class="number">100</span><span class="number">-0</span>,<span class="number">100</span><span class="operator">+</span><span class="number">50</span>,<span class="number">100</span><span class="number">-50</span><span class="operator">+</span><span class="number">30</span>,<span class="number">10</span><span class="operator">+</span><span class="number">20</span><span class="operator">*</span><span class="number">3</span>,<span class="number">10</span><span class="operator">/</span><span class="number">3</span>,<span class="number">100</span><span class="number">-13.3</span>,<span class="number">100</span> DIV <span class="number">0</span> <span class="keyword">FROM</span> DUAL; # <span class="number">100</span><span class="operator">/</span><span class="number">0</span>，结果为<span class="keyword">null</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-------+-------+--------+-----------+---------+--------+----------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">|</span> <span class="number">100</span><span class="operator">+</span><span class="number">0</span> <span class="operator">|</span> <span class="number">100</span><span class="number">-0</span> <span class="operator">|</span> <span class="number">100</span><span class="operator">+</span><span class="number">50</span> <span class="operator">|</span> <span class="number">100</span><span class="number">-50</span><span class="operator">+</span><span class="number">30</span> <span class="operator">|</span> <span class="number">10</span><span class="operator">+</span><span class="number">20</span><span class="operator">*</span><span class="number">3</span> <span class="operator">|</span> <span class="number">10</span><span class="operator">/</span><span class="number">3</span>   <span class="operator">|</span> <span class="number">100</span><span class="number">-13.3</span> <span class="operator">|</span> <span class="number">100</span> DIV <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-------+-------+--------+-----------+---------+--------+----------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span>    <span class="number">150</span> <span class="operator">|</span>        <span class="number">80</span> <span class="operator">|</span>      <span class="number">70</span> <span class="operator">|</span> <span class="number">3.3333</span> <span class="operator">|</span>     <span class="number">86.7</span> <span class="operator">|</span>      <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-------+-------+--------+-----------+---------+--------+----------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- SQL中+号表示加法运算，会将字符串转换为数值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span> <span class="operator">+</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">FROM</span> DUAL; # 数字<span class="number">1</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">+</span> <span class="string">&#x27;1&#x27;</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">101</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span> <span class="operator">+</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">FROM</span> DUAL; # 将a作为数字<span class="number">0</span>处理</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">+</span> <span class="string">&#x27;a&#x27;</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span> <span class="operator">+</span> <span class="keyword">NULL</span> <span class="keyword">FROM</span> DUAL; # <span class="keyword">null</span>参与运算，结果为<span class="keyword">null</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">+</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 取模</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">12</span> <span class="operator">%</span> <span class="number">3</span>,<span class="number">10</span> <span class="operator">%</span><span class="number">2</span>,<span class="number">12</span> <span class="operator">%</span> <span class="number">-5</span>,<span class="number">-12</span> <span class="operator">%</span> <span class="number">5</span>,<span class="number">-12</span> <span class="operator">%</span> <span class="number">-5</span> <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------+---------+---------+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span> <span class="operator">%</span> <span class="number">3</span> <span class="operator">|</span> <span class="number">10</span> <span class="operator">%</span><span class="number">2</span> <span class="operator">|</span> <span class="number">12</span> <span class="operator">%</span> <span class="number">-5</span> <span class="operator">|</span> <span class="number">-12</span> <span class="operator">%</span> <span class="number">5</span> <span class="operator">|</span> <span class="number">-12</span> <span class="operator">%</span> <span class="number">-5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------+---------+---------+----------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">0</span> <span class="operator">|</span>     <span class="number">0</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>      <span class="number">-2</span> <span class="operator">|</span>       <span class="number">-2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------+---------+---------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 比较运算符</span></span><br><span class="line"><span class="comment">-- 结果为真，则返回1，结果为假的，则返回0，其他情况返回null</span></span><br><span class="line"><span class="comment">-- = 等于</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span> <span class="operator">=</span> <span class="number">1</span>,<span class="number">1</span> <span class="operator">=</span> <span class="number">2</span>,<span class="number">1</span> <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span>, <span class="number">1</span> <span class="operator">=</span>  <span class="string">&#x27;a&#x27;</span>, <span class="number">0</span>  <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">FROM</span> DUAL; # 数字和字符串比较，则将字符串转换为<span class="number">0</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+---------+----------+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">=</span> <span class="number">1</span> <span class="operator">|</span> <span class="number">1</span> <span class="operator">=</span> <span class="number">2</span> <span class="operator">|</span> <span class="number">1</span> <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="operator">|</span> <span class="number">1</span> <span class="operator">=</span>  <span class="string">&#x27;a&#x27;</span> <span class="operator">|</span> <span class="number">0</span>  <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+---------+----------+----------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>     <span class="number">0</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>        <span class="number">0</span> <span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+---------+----------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">2</span> warnings (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;a&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;ab&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;ab&#x27;</span>,<span class="string">&#x27;a&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;b&#x27;</span>; # 字符串和字符串比较，则则按照ANSI比较规则，这里就是UTF<span class="number">-8</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="string">&#x27;a&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span> <span class="operator">|</span> <span class="string">&#x27;ab&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;ab&#x27;</span> <span class="operator">|</span> <span class="string">&#x27;a&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;b&#x27;</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+-----------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span>         <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span><span class="operator">=</span> <span class="keyword">NULL</span>,<span class="keyword">NULL</span><span class="operator">=</span><span class="keyword">NULL</span>; # 只要有<span class="keyword">NULL</span>参与判断，结果为<span class="keyword">null</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span><span class="operator">=</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span><span class="operator">=</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-----------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>      <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SC <span class="keyword">where</span> Score <span class="operator">=</span> <span class="keyword">null</span>; # 此时不会返回任何条目，这是因为匹配结果返回<span class="keyword">null</span>，而不是<span class="number">1</span>，</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- &lt;=&gt; 安全等于，在没有null时，跟=作用一样，在有null时，两边都是null，返回1，一边是null，返回0</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SC <span class="keyword">where</span> Score <span class="operator">&lt;=&gt;</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> CId  <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">08</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- &lt;&gt; 不相等, != 不相等, &lt; 小于，&lt;= 小于等于, &gt; 大于, &gt;= 大于等于</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">2</span> <span class="operator">&lt;&gt;</span> <span class="number">3</span>, <span class="number">2</span> <span class="operator">!=</span> <span class="number">3</span>, <span class="number">2</span> <span class="operator">&lt;</span><span class="number">3</span> ,<span class="number">2</span> <span class="operator">&lt;=</span><span class="number">3</span>,<span class="number">2</span><span class="operator">&gt;</span><span class="number">3</span>,<span class="number">2</span><span class="operator">&gt;=</span><span class="number">3</span> <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+------+-------+-----+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">&lt;&gt;</span> <span class="number">3</span> <span class="operator">|</span> <span class="number">2</span> <span class="operator">!=</span> <span class="number">3</span> <span class="operator">|</span> <span class="number">2</span> <span class="operator">&lt;</span><span class="number">3</span> <span class="operator">|</span> <span class="number">2</span> <span class="operator">&lt;=</span><span class="number">3</span> <span class="operator">|</span> <span class="number">2</span><span class="operator">&gt;</span><span class="number">3</span> <span class="operator">|</span> <span class="number">2</span><span class="operator">&gt;=</span><span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+------+-------+-----+------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span>    <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+------+-------+-----+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 最小最大</span></span><br><span class="line"><span class="comment">-- LEAST(value1,value2,...)</span></span><br><span class="line"><span class="comment">-- GREATEST(value1,value2,...)</span></span><br><span class="line"><span class="keyword">SELECT</span> LEAST(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;v&#x27;</span>,<span class="string">&#x27;c&#x27;</span>),GREATEST(<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;t&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span> LEAST(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;v&#x27;</span>,<span class="string">&#x27;c&#x27;</span>) <span class="operator">|</span> GREATEST(<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;t&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span> a                  <span class="operator">|</span> t                     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> LEAST(Sage,Sname) <span class="keyword">FROM</span> Student;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> LEAST(Sage,Sname)   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">12</span> warnings (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 区间</span></span><br><span class="line"><span class="comment">-- BETWEEN 条件下界 AND 条件上界,包含相等 </span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student  <span class="keyword">WHERE</span> Sage <span class="keyword">BETWEEN</span> <span class="string">&#x27;1990-01-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;1994-12-12&#x27;</span>; # <span class="operator">&gt;</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="keyword">AND</span> <span class="operator">&lt;</span> <span class="number">1994</span><span class="number">-12</span><span class="number">-12</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student  <span class="keyword">WHERE</span> Sage <span class="keyword">BETWEEN</span> <span class="string">&#x27;1994-12-12&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;1991-01-01&#x27;</span>; # <span class="operator">&gt;</span> <span class="number">1994</span><span class="number">-12</span><span class="number">-12</span> <span class="keyword">AND</span> <span class="operator">&lt;</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> 没有结果</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 集合</span></span><br><span class="line"><span class="comment">-- IN (set) \ NOT IN (set)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SC <span class="keyword">WHERE</span> Score <span class="keyword">in</span> (<span class="number">80</span>,<span class="number">90</span>); # Score <span class="operator">=</span><span class="number">80</span> <span class="keyword">or</span> Score <span class="operator">=</span> <span class="number">90</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> CId  <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>  <span class="number">90.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SC <span class="keyword">WHERE</span> Score <span class="keyword">NOT</span> <span class="keyword">in</span> (<span class="number">80</span>,<span class="number">90</span>); # Score <span class="operator">!=</span> <span class="number">80</span> <span class="keyword">and</span> Score <span class="operator">!=</span> <span class="number">90</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> CId  <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>  <span class="number">99.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>  <span class="number">70.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>  <span class="number">60.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>  <span class="number">50.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>  <span class="number">30.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>  <span class="number">20.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>  <span class="number">76.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>  <span class="number">87.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>  <span class="number">31.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>  <span class="number">34.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span>  <span class="number">89.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span>  <span class="number">98.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 模糊查询</span></span><br><span class="line"><span class="comment">-- LIKE</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27;%雷%&#x27;</span>; # <span class="operator">%</span>号代表不确定个数的字符</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27;_雷%&#x27;</span>; # _号代表<span class="number">1</span>个字符</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27;\_雷%&#x27;</span>; # \转义</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27;$_雷%&#x27;</span> <span class="keyword">ESCAPE</span> <span class="string">&#x27;$&#x27;</span>; # 转义符为$</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 正则表达式</span></span><br><span class="line"><span class="comment">-- REGEXP \ RLIKE</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">Where</span> Sname REGEXP <span class="string">&#x27;雷$&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">Where</span> Sname RLIKE <span class="string">&#x27;雷$&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 逻辑运算符</span></span><br><span class="line"><span class="comment">-- 或    	且      	非</span></span><br><span class="line"><span class="comment">-- OR ||, AND &amp;&amp; ,NOT ! </span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sid <span class="operator">=</span> <span class="number">1</span> XOR Sid <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sid <span class="operator">=</span> <span class="number">1</span> <span class="operator">||</span> Sid <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sid <span class="operator">=</span> <span class="number">1</span> <span class="keyword">AND</span> Ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sid <span class="operator">=</span> <span class="number">1</span> <span class="operator">&amp;&amp;</span> Ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> <span class="keyword">NOT</span> Sid <span class="operator">=</span> <span class="number">1</span> <span class="operator">&amp;&amp;</span> <span class="keyword">NOT</span> Ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>; </span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">09</span>   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span>   <span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">13</span>   <span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sid <span class="operator">!=</span> <span class="number">1</span> <span class="operator">&amp;&amp;</span> Ssex <span class="operator">!=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">09</span>   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span>   <span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">13</span>   <span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 异或 XOR,仅满足一边，另外一边不满足</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sid <span class="operator">=</span> <span class="number">1</span> XOR Ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">09</span>   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span>   <span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">13</span>   <span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">9</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>运算符优先级</p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/image-20221027121457432.png" alt="image-20221027121457432"></p>
<p>数字编号越大，优先级越高，优先级高的运算符先进行计算。</p>
<h3 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h3><p>先将操作数变成二进制数，然后进行运算，再将计算结果从二进制转换成十进制</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 位运算符</span></span><br><span class="line"><span class="comment">-- &amp; 与，| 或，^ 异，~ 取反, &gt;&gt; 右移,&lt;&lt; 左移</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">7</span> <span class="operator">&amp;</span> <span class="number">4</span>,<span class="number">7</span><span class="operator">|</span><span class="number">4</span>,<span class="number">3</span> <span class="operator">^</span><span class="number">3</span>,<span class="number">10</span> <span class="operator">&amp;</span> <span class="operator">~</span><span class="number">2</span>,<span class="number">2</span><span class="operator">&gt;&gt;</span><span class="number">1</span>,<span class="number">2</span><span class="operator">&lt;&lt;</span><span class="number">1</span>  <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-----+------+---------+------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">7</span> <span class="operator">&amp;</span> <span class="number">4</span> <span class="operator">|</span> <span class="number">7</span><span class="operator">|</span><span class="number">4</span> <span class="operator">|</span> <span class="number">3</span> <span class="operator">^</span><span class="number">3</span> <span class="operator">|</span> <span class="number">10</span> <span class="operator">&amp;</span> <span class="operator">~</span><span class="number">2</span> <span class="operator">|</span> <span class="number">2</span><span class="operator">&gt;&gt;</span><span class="number">1</span> <span class="operator">|</span> <span class="number">2</span><span class="operator">&lt;&lt;</span><span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-----+------+---------+------+------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">4</span> <span class="operator">|</span>   <span class="number">7</span> <span class="operator">|</span>    <span class="number">0</span> <span class="operator">|</span>       <span class="number">8</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-----+------+---------+------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="排序与分页"><a href="#排序与分页" class="headerlink" title="排序与分页"></a>排序与分页</h2><p>如果没有排序操作，默认按照数据添加的顺序排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ORDER BY 排序，默认是升序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">ORDER</span> <span class="keyword">BY</span> Sage;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span>   <span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">13</span>   <span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">09</span>   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">ORDER</span> <span class="keyword">BY</span> Sage <span class="keyword">ASC</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span>   <span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">13</span>   <span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">09</span>   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">--  降序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">ORDER</span> <span class="keyword">BY</span> Sage <span class="keyword">DESC</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">09</span>   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">13</span>   <span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span>   <span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列的别名可以作为排序规则，不能在where中使用</span></span><br><span class="line"><span class="keyword">SELECT</span> Sage,Ssex <span class="keyword">as</span> my_sex <span class="keyword">FROM</span> Student <span class="keyword">ORDER</span> <span class="keyword">BY</span> my_sex;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> Sage                <span class="operator">|</span> my_sex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+--------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- WHERE 和 ORDER BY 混用，ORDER BY在 WHERE后面</span></span><br><span class="line"><span class="keyword">SELECT</span> Sage,Ssex <span class="keyword">as</span> my_sex <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sid <span class="operator">&gt;</span> <span class="number">10</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> my_sex;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> Sage                <span class="operator">|</span> my_sex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+--------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 二级排序，先按照 Sage排序，Sage相同的情况下，再按照 Sid排序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">ORDER</span> <span class="keyword">BY</span> Sage,Sid;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2012</span><span class="number">-06</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span>   <span class="operator">|</span> 赵六   <span class="operator">|</span> <span class="number">2013</span><span class="number">-06</span><span class="number">-13</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">13</span>   <span class="operator">|</span> 孙七   <span class="operator">|</span> <span class="number">2014</span><span class="number">-06</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">09</span>   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span>   <span class="operator">|</span> 李四   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-25</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>

<p>分页</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 每页显示4条记录，此时显示第1页面，0代表偏移量0，从1个开始，4代表个数，获取4个</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student LIMIT <span class="number">0</span>,<span class="number">4</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从0开始，等价于 LIMIT 4</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student LIMIT <span class="number">4</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示第二页</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student LIMIT <span class="number">4</span>,<span class="number">4</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">05</span>   <span class="operator">|</span> 周梅   <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">06</span>   <span class="operator">|</span> 吴兰   <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">07</span>   <span class="operator">|</span> 郑竹   <span class="operator">|</span> <span class="number">1989</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">09</span>   <span class="operator">|</span> 张三   <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 声明顺序，WHERE ... ORDER BY ... LIMIT ...</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> Sage LIMIT <span class="number">0</span>,<span class="number">4</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在MySQL8.0中，支持 OFFSET, 也就是偏移量，第一页显示四个</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student LIMIT <span class="number">4</span> <span class="keyword">OFFSET</span> <span class="number">0</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span> 钱电   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-21</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">03</span>   <span class="operator">|</span> 孙风   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">04</span>   <span class="operator">|</span> 李云   <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-06</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>无法将表格关联起来时，如果需要查询某个学生某个学科的成绩，查询方式如下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询学生</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> Student <span class="keyword">WHERE</span> Sname <span class="operator">=</span> <span class="string">&#x27;赵雷&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> Sname  <span class="operator">|</span> Sage                <span class="operator">|</span> Ssex <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 赵雷   <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------------------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询科目</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Course <span class="keyword">WHERE</span> Cname <span class="operator">=</span> <span class="string">&#x27;语文&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+</span></span><br><span class="line"><span class="operator">|</span> CId  <span class="operator">|</span> Cname  <span class="operator">|</span> TId  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> 语文   <span class="operator">|</span> <span class="number">02</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询该生该科目成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SC <span class="keyword">WHERE</span> Sid <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> <span class="keyword">AND</span> Cid <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> SId  <span class="operator">|</span> CId  <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span> <span class="number">01</span>   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>这种查询方式是繁琐的，而且当查询条件是一个范围，查询过程会浪费很多资源和时间，所以需要使用多表查询</p>
<h3 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 会产生684条记录，是三张表的记录相乘12 * 3 * 19，也就是每个人与每个科目、每个成绩匹配一次，这种场景是笛卡尔积错误，</span></span><br><span class="line"><span class="comment">-- 错误原因是缺少多表的连接条件</span></span><br><span class="line"><span class="keyword">SELECT</span> Sname,Cname,score <span class="keyword">FROM</span> Student,Course,SC;</span><br><span class="line">...</span><br><span class="line"><span class="number">684</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 加上连接条件，通过表和表之间的字段进行关联</span></span><br><span class="line"><span class="keyword">SELECT</span> Sname,Cname,score <span class="keyword">FROM</span> Student,Course,SC <span class="keyword">WHERE</span> SC.SId <span class="operator">=</span> Student.Sid <span class="keyword">and</span> SC.CId <span class="operator">=</span> Course.Cid;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+-------+</span></span><br><span class="line"><span class="operator">|</span> Sname  <span class="operator">|</span> Cname  <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+-------+</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> 英语   <span class="operator">|</span>  <span class="number">99.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> 数学   <span class="operator">|</span>  <span class="number">90.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> 语文   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> 英语   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> 数学   <span class="operator">|</span>  <span class="number">60.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> 语文   <span class="operator">|</span>  <span class="number">70.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> 英语   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> 数学   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> 语文   <span class="operator">|</span>  <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> 英语   <span class="operator">|</span>  <span class="number">20.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> 数学   <span class="operator">|</span>  <span class="number">30.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> 语文   <span class="operator">|</span>  <span class="number">50.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 周梅   <span class="operator">|</span> 数学   <span class="operator">|</span>  <span class="number">87.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 周梅   <span class="operator">|</span> 语文   <span class="operator">|</span>  <span class="number">76.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 吴兰   <span class="operator">|</span> 英语   <span class="operator">|</span>  <span class="number">34.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 吴兰   <span class="operator">|</span> 语文   <span class="operator">|</span>  <span class="number">31.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 郑竹   <span class="operator">|</span> 英语   <span class="operator">|</span>  <span class="number">98.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 郑竹   <span class="operator">|</span> 数学   <span class="operator">|</span>  <span class="number">89.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+-------+</span></span><br><span class="line"><span class="number">18</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果查询语句中出现了多个表都存在的字段，则必须指明此字段所在的表</span></span><br><span class="line"><span class="comment">-- 从SQL优化的角度，建议多表查询时，每个字段钱都指明其所在的表</span></span><br><span class="line"><span class="comment">-- 可以给表起别名，在 SELECT 和 WHERE中使用别名，一旦有别名，则必须使用别名</span></span><br><span class="line"><span class="keyword">SELECT</span> t1.Sname &quot;姓名&quot;,t2.Cname &quot;科目&quot;,t3.score &quot;成绩&quot; <span class="keyword">FROM</span> Student t1,Course t2,SC t3 <span class="keyword">WHERE</span> t3.SId <span class="operator">=</span> t1.Sid <span class="keyword">and</span> t3.CId <span class="operator">=</span> t2.Cid;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span> 姓名   <span class="operator">|</span> 科目   <span class="operator">|</span> 成绩   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">99.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">90.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">60.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">70.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">20.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">30.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">50.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 周梅   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">87.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 周梅   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">76.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 吴兰   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">34.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 吴兰   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">31.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 郑竹   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">98.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 郑竹   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">89.0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+--------+</span></span><br><span class="line"><span class="number">18</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 如果有n个表实现多表查询，则最少有n-1个连接条件，否则会出现笛卡尔积错误。</span></span><br></pre></td></tr></table></figure>

<p>笛卡尔积</p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/modb_20220608_1aee8676-e70b-11ec-98dd-fa163eb4f6be.png" alt="img"></p>
<h3 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h3><p>通过非等于条件连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> t1.Sname &quot;姓名&quot;,t2.Cname &quot;科目&quot;,t3.score &quot;成绩&quot;,t4.grade_level &quot;等级&quot; <span class="keyword">FROM</span> Student t1,Course t2,SC t3,score_grades t4 <span class="keyword">WHERE</span> t3.SId <span class="operator">=</span> t1.Sid <span class="keyword">and</span> t3.CId <span class="operator">=</span> t2.Cid <span class="keyword">AND</span> t3.score <span class="keyword">BETWEEN</span> t4.lowest_sal <span class="keyword">AND</span> t4.highest_sal;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span> 姓名   <span class="operator">|</span> 科目   <span class="operator">|</span> 成绩   <span class="operator">|</span> 等级   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">90.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 赵雷   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">99.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">70.0</span> <span class="operator">|</span> B      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">60.0</span> <span class="operator">|</span> B      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 钱电   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙风   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">80.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">30.0</span> <span class="operator">|</span> D      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">20.0</span> <span class="operator">|</span> D      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李云   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">50.0</span> <span class="operator">|</span> C      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 周梅   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">76.0</span> <span class="operator">|</span> B      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 周梅   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">87.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 吴兰   <span class="operator">|</span> 语文   <span class="operator">|</span>   <span class="number">31.0</span> <span class="operator">|</span> D      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 吴兰   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">34.0</span> <span class="operator">|</span> D      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 郑竹   <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">89.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 郑竹   <span class="operator">|</span> 英语   <span class="operator">|</span>   <span class="number">98.0</span> <span class="operator">|</span> A      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+--------+--------+</span></span><br><span class="line"><span class="number">18</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h3><p>表中一个字段属于同表中另外一个字段</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp.emp_id, emp.lname ,mgr.emp_id,mgr.lname <span class="keyword">FROM</span> employee emp,employee mgr <span class="keyword">WHERE</span> emp.superior_emp_id <span class="operator">=</span> mgr.emp_id;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-----------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> lname     <span class="operator">|</span> emp_id <span class="operator">|</span> lname     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-----------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Barker    <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Smith     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Tyler     <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Smith     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Hawthorne <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Tyler     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> Gooding   <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Hawthorne <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Fleming   <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Hawthorne <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Tucker    <span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Fleming   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Parker    <span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Fleming   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Grossman  <span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Fleming   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Roberts   <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Hawthorne <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Ziegler   <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Roberts   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Jameson   <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Roberts   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Blake     <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Hawthorne <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Mason     <span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Blake     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Portman   <span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Blake     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Markham   <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Hawthorne <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Fowler    <span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Markham   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Tulman    <span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Markham   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> Tulman    <span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Markham   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-----------+--------+-----------+</span></span><br><span class="line"><span class="number">18</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><p>合并具有同一列的两个以上的表的行，结果集中不包含一个表与另一个表不匹配的行。上面的等值连接、非等值连接、自连接都属于内连接。</p>
<p>查询下图中<code>a_table</code>和<code>b_table</code>的集就是内连接</p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/37c9d4c7-5609-4a62-8be6-d5cdc8bd441a-20221028133721207.png" alt="img"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SQL 99 语法实现内连接, JOIN ...(其他表) ON ...(连接条件) JOIN ...(其他表) ON ...(连接条件)</span></span><br><span class="line"><span class="keyword">SELECT</span> lname,`name` <span class="keyword">FROM</span> employee e <span class="keyword">JOIN</span> department d <span class="keyword">on</span> e.dept_id <span class="operator">=</span> d.dept_id; </span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+</span></span><br><span class="line"><span class="operator">|</span> lname     <span class="operator">|</span> name           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+</span></span><br><span class="line"><span class="operator">|</span> Hawthorne <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Fleming   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tucker    <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Parker    <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Grossman  <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Roberts   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Ziegler   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jameson   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Blake     <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Mason     <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Portman   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Markham   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Fowler    <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tulman    <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Gooding   <span class="operator">|</span> Loans          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Smith     <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Barker    <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tyler     <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+</span></span><br><span class="line"><span class="number">18</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><p>合并具有同一列的两个以上的表的行，结果集中除了包含一个表与另一个表匹配的行之外，还查询了左表或右表中不匹配的行</p>
<p>上图中，除了<code>a_table</code>和<code>b_table</code>的集之外，还包含<code>a_table</code>的左边部分或者包含<code>b_table</code>的右边部分，或者都包含，具体可以分为三类。</p>
<p>外连接的分类</p>
<ul>
<li><p>左外连接：除了<code>a_table</code>和<code>b_table</code>的集之外，还包含<code>a_table</code>的左边部分，此时左边的表称为主表，右边的表称为从表</p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/6d439f64-b380-4750-9dfd-0fb007308291.png" alt="img"></p>
</li>
<li><p>右外连接：除了<code>a_table</code>和<code>b_table</code>的集之外，还包含<code>b_table</code>的右边部分，此时右边的表称为主表，左边的表称为从表</p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/11/2c37d86e-dcc8-4987-a3ba-6764894bace3.png" alt="img"></p>
</li>
<li><p>满外连接：除了<code>a_table</code>和<code>b_table</code>的集之外，还包含<code>a_table</code>的左边部分和<code>b_table</code>的右边部分</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 左外连接，SQL 92语法，使用+号，MySQL不支持SQL92版本的写法</span></span><br><span class="line"><span class="comment">-- SQL 99语法，使用 LEFT OUTER(OUTER可省略) JOIN ON 的方式实现左外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,`name` <span class="keyword">FROM</span> employee e <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> <span class="keyword">NULL</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> Loans          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右外连接</span></span><br><span class="line"><span class="comment">-- SQL 99语法，使用 RIGHT OUTER(OUTER可省略) JOIN ON 的方式实现右外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,`name` <span class="keyword">FROM</span> employee e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> Loans          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="keyword">NULL</span> <span class="operator">|</span> Test           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 满外连接，MySQL不支持满外连接，会出现报错</span></span><br><span class="line"><span class="comment">-- SQL 99语法，使用 FULL OUTER(OUTER可省略) JOIN ON 的方式实现右外连接，</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,`name` <span class="keyword">FROM</span> employee e <span class="keyword">FULL</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;FULL JOIN department d ON e.dept_id = d.dept_id&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="合并查询结果"><a href="#合并查询结果" class="headerlink" title="合并查询结果"></a>合并查询结果</h3><p>由于MySQL不支持满外连接，是通过合并查询结果是实现</p>
<ul>
<li><p>UNION：操作符返回两个查询的结果集的并集，去除重复记录。<strong>左边部分+中间部分+右边部分</strong></p>
</li>
<li><p>UNION ALL：操作符返回两个查询的结果集的并集，对于结果集的重复部门，不去重。<strong>左边部分+中间部分+中间部分+右边部分</strong></p>
</li>
</ul>
<p>相比之下，<code>UNION</code>是在 <code>UNION  ALL</code>的基础上，将两个查询结果的交集去重，会有性能损失，因此，更提倡使用<code>UNION  ALL</code></p>
<h3 id="7中SQL-JOINS的实现"><a href="#7中SQL-JOINS的实现" class="headerlink" title="7中SQL JOINS的实现"></a>7中SQL JOINS的实现</h3><p>通过 <code>JOIN</code>和 <code>UNION</code>，实现7种<code>SQL JOINS</code></p>
<p><img src="https://raw.githubusercontent.com/xiaoyeshiyu/image-hosting-service/main/uPic/2022/10/1620-20221028140755161.png" alt="img"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 左上</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> <span class="keyword">NULL</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> Loans          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右上</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> Loans          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="keyword">NULL</span> <span class="operator">|</span> Test           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 左中</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id <span class="keyword">WHERE</span> d.dept_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右中</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id <span class="keyword">WHERE</span> e.dept_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="keyword">NULL</span> <span class="operator">|</span> Test <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 左下：满外连接</span></span><br><span class="line"><span class="comment">-- 方式1：左上 UNION ON 右中</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id </span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span> </span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id <span class="keyword">WHERE</span> e.dept_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> <span class="keyword">NULL</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> Loans          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="keyword">NULL</span> <span class="operator">|</span> Test           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="number">20</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2：左中 UNION ALL 右上</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id <span class="keyword">WHERE</span> d.dept_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> <span class="keyword">NULL</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> Loans          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="keyword">NULL</span> <span class="operator">|</span> Test           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="number">20</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右下</span></span><br><span class="line"><span class="comment">-- 左中 UNION ALL 右中</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id <span class="keyword">WHERE</span> d.dept_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,d.name <span class="keyword">FROM</span> employee e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> department d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id <span class="keyword">WHERE</span> e.dept_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="keyword">NULL</span> <span class="operator">|</span> Test <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="SQL-99语法新特性"><a href="#SQL-99语法新特性" class="headerlink" title="SQL 99语法新特性"></a>SQL 99语法新特性</h3><ul>
<li><p>自然连接</p>
<p>可以理解为SQL 92中的等值连接，会自动查询两张表中<strong>所有相同的字段</strong>，然后进行<strong>等值连接</strong>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 自然连接</span></span><br><span class="line"><span class="keyword">SELECT</span> lname,`name` <span class="keyword">FROM</span> employee e <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> department d;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+</span></span><br><span class="line"><span class="operator">|</span> lname     <span class="operator">|</span> name           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+</span></span><br><span class="line"><span class="operator">|</span> Hawthorne <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Fleming   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tucker    <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Parker    <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Grossman  <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Roberts   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Ziegler   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jameson   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Blake     <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Mason     <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Portman   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Markham   <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Fowler    <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tulman    <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Gooding   <span class="operator">|</span> Loans          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Smith     <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Barker    <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tyler     <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+</span></span><br><span class="line"><span class="number">18</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>USING</p>
<p>指定数据表里的同名字段进行<strong>等值连接</strong>，但是只能配合JOIN一起使用。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- USING</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,`name` <span class="keyword">FROM</span> employee e <span class="keyword">JOIN</span> department d <span class="keyword">USING</span> (dept_id);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> name           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Operations     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> Loans          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Administration <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------------+</span></span><br><span class="line"><span class="number">18</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h2><p>将常用使用的代码封装出来作为函数，可以<strong>提高效率</strong>和<strong>可维护性</strong>。</p>
<p>从创建的角度，函数分为<strong>内置函数</strong>和<strong>自定义函数</strong>。内置函数为DBMS内置的函数，不同的DBMS，内置函数差别很大。自定义函数为用户自定义的函数。</p>
<p>从操作角度，函数分为<strong>单行函数</strong>和<strong>多行函数（聚合函数、分组函数）</strong>。单行函数为输入对象为单行，多行函数为输入对象为多行。</p>
<h3 id="基本函数"><a href="#基本函数" class="headerlink" title="基本函数"></a>基本函数</h3><p><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/sql_functions.asp">https://www.w3school.com.cn/sql/sql_functions.asp</a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 数值函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span> (<span class="number">-123</span>),<span class="built_in">ABS</span> (<span class="number">32</span>),SIGN (<span class="number">-23</span>),SIGN (<span class="number">43</span>),PI(),<span class="built_in">CEIL</span>(<span class="number">32.32</span>),<span class="built_in">CEILING</span> (<span class="number">-43.23</span>),<span class="built_in">FLOOR</span> (<span class="number">32.32</span>), <span class="built_in">FLOOR</span> (<span class="number">-43.23</span>),<span class="built_in">MOD</span>(<span class="number">12</span>, <span class="number">5</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------+------------+-----------+----------+-------------+------------------+---------------+----------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">ABS</span> (<span class="number">-123</span>) <span class="operator">|</span> <span class="built_in">ABS</span> (<span class="number">32</span>) <span class="operator">|</span> SIGN (<span class="number">-23</span>) <span class="operator">|</span> SIGN (<span class="number">43</span>) <span class="operator">|</span> PI()     <span class="operator">|</span> <span class="built_in">CEIL</span>(<span class="number">32.32</span>) <span class="operator">|</span> <span class="built_in">CEILING</span> (<span class="number">-43.23</span>) <span class="operator">|</span> <span class="built_in">FLOOR</span> (<span class="number">32.32</span>) <span class="operator">|</span> <span class="built_in">FLOOR</span> (<span class="number">-43.23</span>) <span class="operator">|</span> <span class="built_in">MOD</span>(<span class="number">12</span>, <span class="number">5</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------+------------+-----------+----------+-------------+------------------+---------------+----------------+------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">123</span> <span class="operator">|</span>       <span class="number">32</span> <span class="operator">|</span>         <span class="number">-1</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> <span class="number">3.141593</span> <span class="operator">|</span>          <span class="number">33</span> <span class="operator">|</span>              <span class="number">-43</span> <span class="operator">|</span>            <span class="number">32</span> <span class="operator">|</span>            <span class="number">-44</span> <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------+------------+-----------+----------+-------------+------------------+---------------+----------------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 随机数</span></span><br><span class="line"><span class="keyword">SELECT</span> RAND(),RAND(),RAND(<span class="number">10</span>),RAND(<span class="number">10</span>),RAND(<span class="number">-1</span>), RAND(<span class="number">-1</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+--------------------+--------------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> RAND()             <span class="operator">|</span> RAND()             <span class="operator">|</span> RAND(<span class="number">10</span>)           <span class="operator">|</span> RAND(<span class="number">10</span>)           <span class="operator">|</span> RAND(<span class="number">-1</span>)           <span class="operator">|</span> RAND(<span class="number">-1</span>)           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+--------------------+--------------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.5174580277106334</span> <span class="operator">|</span> <span class="number">0.8552275140352803</span> <span class="operator">|</span> <span class="number">0.6570515219653505</span> <span class="operator">|</span> <span class="number">0.6570515219653505</span> <span class="operator">|</span> <span class="number">0.9050373219931845</span> <span class="operator">|</span> <span class="number">0.9050373219931845</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+--------------------+--------------------+--------------------+--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 四舍五入，截断</span></span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">123.456</span>),ROUND(<span class="number">123.456</span>,<span class="number">2</span>),ROUND(<span class="number">123.456</span>,<span class="number">-2</span>),<span class="keyword">TRUNCATE</span>(<span class="number">123.456</span>,<span class="number">2</span>),<span class="keyword">TRUNCATE</span>(<span class="number">123.456</span>,<span class="number">-1</span>),<span class="built_in">SQRT</span>(<span class="number">7</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+------------------+-------------------+---------------------+----------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> ROUND(<span class="number">123.456</span>) <span class="operator">|</span> ROUND(<span class="number">123.456</span>,<span class="number">2</span>) <span class="operator">|</span> ROUND(<span class="number">123.456</span>,<span class="number">-2</span>) <span class="operator">|</span> <span class="keyword">TRUNCATE</span>(<span class="number">123.456</span>,<span class="number">2</span>) <span class="operator">|</span> <span class="keyword">TRUNCATE</span>(<span class="number">123.456</span>,<span class="number">-1</span>) <span class="operator">|</span> <span class="built_in">SQRT</span>(<span class="number">7</span>)            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+------------------+-------------------+---------------------+----------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">123</span> <span class="operator">|</span>           <span class="number">123.46</span> <span class="operator">|</span>               <span class="number">100</span> <span class="operator">|</span>              <span class="number">123.45</span> <span class="operator">|</span>                  <span class="number">120</span> <span class="operator">|</span> <span class="number">2.6457513110645907</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+------------------+-------------------+---------------------+----------------------+--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 嵌套</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">TRUNCATE</span>(<span class="built_in">SQRT</span>(<span class="number">7</span>),<span class="number">2</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">TRUNCATE</span>(<span class="built_in">SQRT</span>(<span class="number">7</span>),<span class="number">2</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span>                <span class="number">2.64</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 角度和弧度</span></span><br><span class="line"><span class="keyword">SELECT</span> RADIANS(<span class="number">90</span>),RADIANS(<span class="number">60</span>),DEGREES(<span class="number">2</span><span class="operator">*</span>PI()) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> RADIANS(<span class="number">90</span>)        <span class="operator">|</span> RADIANS(<span class="number">60</span>)        <span class="operator">|</span> DEGREES(<span class="number">2</span><span class="operator">*</span>PI()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1.5707963267948966</span> <span class="operator">|</span> <span class="number">1.0471975511965976</span> <span class="operator">|</span>             <span class="number">360</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+-----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 三角函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SIN</span>(RADIANS(<span class="number">30</span>)),DEGREES(<span class="built_in">ASIN</span>(<span class="number">1</span>)),<span class="built_in">TAN</span>(RADIANS(<span class="number">45</span>)),DEGREES(<span class="built_in">ATAN</span>(<span class="number">1</span>)) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------------------+--------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">SIN</span>(RADIANS(<span class="number">30</span>))    <span class="operator">|</span> DEGREES(<span class="built_in">ASIN</span>(<span class="number">1</span>)) <span class="operator">|</span> <span class="built_in">TAN</span>(RADIANS(<span class="number">45</span>))   <span class="operator">|</span> DEGREES(<span class="built_in">ATAN</span>(<span class="number">1</span>)) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------------------+--------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.49999999999999994</span> <span class="operator">|</span>               <span class="number">90</span> <span class="operator">|</span> <span class="number">0.9999999999999999</span> <span class="operator">|</span>               <span class="number">45</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------------------+--------------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 指数和对数</span></span><br><span class="line"><span class="keyword">SELECT</span> POW(<span class="number">2</span>, <span class="number">5</span>) , <span class="built_in">POWER</span>(<span class="number">2</span>, <span class="number">4</span>), <span class="built_in">EXP</span>(<span class="number">2</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> POW(<span class="number">2</span>, <span class="number">5</span>) <span class="operator">|</span> <span class="built_in">POWER</span>(<span class="number">2</span>, <span class="number">4</span>) <span class="operator">|</span> <span class="built_in">EXP</span>(<span class="number">2</span>)           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">32</span> <span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span> <span class="number">7.38905609893065</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LN</span>(<span class="built_in">EXP</span>(<span class="number">2</span>)),<span class="built_in">LOG</span>(<span class="built_in">EXP</span>(<span class="number">2</span>)),<span class="built_in">LOG10</span>(<span class="number">10</span>),LOG2(<span class="number">4</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-------------+-----------+---------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">LN</span>(<span class="built_in">EXP</span>(<span class="number">2</span>)) <span class="operator">|</span> <span class="built_in">LOG</span>(<span class="built_in">EXP</span>(<span class="number">2</span>)) <span class="operator">|</span> <span class="built_in">LOG10</span>(<span class="number">10</span>) <span class="operator">|</span> LOG2(<span class="number">4</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-------------+-----------+---------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span>           <span class="number">2</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-------------+-----------+---------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 进制间的转换</span></span><br><span class="line"><span class="keyword">SELECT</span> BIN(<span class="number">10</span>),HEX(<span class="number">10</span>),OCT(<span class="number">10</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span> BIN(<span class="number">10</span>) <span class="operator">|</span> HEX(<span class="number">10</span>) <span class="operator">|</span> OCT(<span class="number">10</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1010</span>    <span class="operator">|</span> A       <span class="operator">|</span> <span class="number">12</span>      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------+---------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ASC码，只有第一个字符，字符长度和数据长度，一个英文占1个字节，一个中文占3个字节</span></span><br><span class="line"><span class="keyword">SELECT</span> ASCII(<span class="string">&#x27;Abc&#x27;</span>),<span class="keyword">CHAR_LENGTH</span>(<span class="string">&#x27;hello&#x27;</span>),<span class="keyword">CHAR_LENGTH</span>(<span class="string">&#x27;我们&#x27;</span>),LENGTH(<span class="string">&#x27;hello&#x27;</span>),LENGTH(<span class="string">&#x27;我们&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+----------------------+-----------------------+-----------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> ASCII(<span class="string">&#x27;Abc&#x27;</span>) <span class="operator">|</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">&#x27;hello&#x27;</span>) <span class="operator">|</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">&#x27;我们&#x27;</span>)   <span class="operator">|</span> LENGTH(<span class="string">&#x27;hello&#x27;</span>) <span class="operator">|</span> LENGTH(<span class="string">&#x27;我们&#x27;</span>)   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+----------------------+-----------------------+-----------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">65</span> <span class="operator">|</span>                    <span class="number">5</span> <span class="operator">|</span>                     <span class="number">2</span> <span class="operator">|</span>               <span class="number">5</span> <span class="operator">|</span>                <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+----------------------+-----------------------+-----------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串连接</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(emp.lname,<span class="string">&#x27; worked hard with &#x27;</span>,emp.title) &quot;details&quot; <span class="keyword">FROM</span> employee `emp`;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> details                                       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> Smith worked hard <span class="keyword">with</span> President              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Barker worked hard <span class="keyword">with</span> Vice President        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tyler worked hard <span class="keyword">with</span> Treasurer              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Hawthorne worked hard <span class="keyword">with</span> Operations Manager <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Gooding worked hard <span class="keyword">with</span> Loan Manager         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Fleming worked hard <span class="keyword">with</span> Head Teller          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tucker worked hard <span class="keyword">with</span> Teller                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Parker worked hard <span class="keyword">with</span> Teller                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Grossman worked hard <span class="keyword">with</span> Teller              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Roberts worked hard <span class="keyword">with</span> Head Teller          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Ziegler worked hard <span class="keyword">with</span> Teller               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jameson worked hard <span class="keyword">with</span> Teller               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Blake worked hard <span class="keyword">with</span> Head Teller            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Mason worked hard <span class="keyword">with</span> Teller                 <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Portman worked hard <span class="keyword">with</span> Teller               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Markham worked hard <span class="keyword">with</span> Head Teller          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Fowler worked hard <span class="keyword">with</span> Teller                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tulman worked hard <span class="keyword">with</span> Teller                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tulman worked hard <span class="keyword">with</span> Teller                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用字符连接字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT_WS(<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;HELP&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------+</span></span><br><span class="line"><span class="operator">|</span> CONCAT_WS(<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;HELP&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------+</span></span><br><span class="line"><span class="operator">|</span> HELP<span class="operator">-</span>hello                    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串插入，替换，索引从1开始</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(<span class="string">&#x27;helloworld&#x27;</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">&#x27;aa111a&#x27;</span>),REPLACE(<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;ll&#x27;</span>,<span class="string">&#x27;lm&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">INSERT</span>(<span class="string">&#x27;helloworld&#x27;</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">&#x27;aa111a&#x27;</span>) <span class="operator">|</span> REPLACE(<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;ll&#x27;</span>,<span class="string">&#x27;lm&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> haa111aoworld                     <span class="operator">|</span> helmo                      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------+----------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 大小写转换</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(<span class="string">&#x27;abc&#x27;</span>),<span class="built_in">LOWER</span>(<span class="string">&#x27;PDF&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">UPPER</span>(<span class="string">&#x27;abc&#x27;</span>) <span class="operator">|</span> <span class="built_in">LOWER</span>(<span class="string">&#x27;PDF&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> ABC          <span class="operator">|</span> pdf          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回左边字符或者右边字符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>),<span class="keyword">RIGHT</span>(<span class="string">&#x27;begin&#x27;</span>,<span class="number">3</span>),<span class="keyword">RIGHT</span>(<span class="string">&#x27;begin&#x27;</span>,<span class="number">13</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+------------------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>) <span class="operator">|</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;begin&#x27;</span>,<span class="number">3</span>) <span class="operator">|</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;begin&#x27;</span>,<span class="number">13</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+------------------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> he              <span class="operator">|</span> gin              <span class="operator">|</span> <span class="keyword">begin</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+------------------+-------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 类型转换,转换成字符串，不足的用*补</span></span><br><span class="line"><span class="keyword">SELECT</span> LPAD(<span class="number">123</span>,<span class="number">10</span>,<span class="string">&#x27;*&#x27;</span>),RPAD(<span class="number">123</span>,<span class="number">10</span>,<span class="string">&#x27;*&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> LPAD(<span class="number">123</span>,<span class="number">10</span>,<span class="string">&#x27;*&#x27;</span>) <span class="operator">|</span> RPAD(<span class="number">123</span>,<span class="number">10</span>,<span class="string">&#x27;*&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="number">123</span>       <span class="operator">|</span> <span class="number">123</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 去除字符串首尾部空格，首部，尾部，</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="string">&#x27;   h e llo   &#x27;</span>),RTRIM(<span class="string">&#x27;   h e llo   &#x27;</span>),LTRIM(<span class="string">&#x27;   h e llo   &#x27;</span>),<span class="built_in">TRIM</span>(<span class="string">&#x27;   h e llo   00&#x27;</span> <span class="keyword">FROM</span> <span class="string">&#x27;0&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+------------------------+------------------------+----------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">TRIM</span>(<span class="string">&#x27;   h e llo   &#x27;</span>) <span class="operator">|</span> RTRIM(<span class="string">&#x27;   h e llo   &#x27;</span>) <span class="operator">|</span> LTRIM(<span class="string">&#x27;   h e llo   &#x27;</span>) <span class="operator">|</span> <span class="built_in">TRIM</span>(<span class="string">&#x27;   h e llo   00&#x27;</span> <span class="keyword">FROM</span> <span class="string">&#x27;0&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+------------------------+------------------------+----------------------------------+</span></span><br><span class="line"><span class="operator">|</span> h e llo               <span class="operator">|</span>    h e llo             <span class="operator">|</span> h e llo                <span class="operator">|</span> <span class="number">0</span>                                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+------------------------+------------------------+----------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重复,空格，比较</span></span><br><span class="line"><span class="keyword">SELECT</span> REPEAT(<span class="string">&#x27;hello&#x27;</span>,<span class="number">4</span>),SPACE(<span class="number">5</span>),STRCMP(<span class="string">&#x27;bac&#x27;</span>,<span class="string">&#x27;def&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> REPEAT(<span class="string">&#x27;hello&#x27;</span>,<span class="number">4</span>)    <span class="operator">|</span> SPACE(<span class="number">5</span>) <span class="operator">|</span> STRCMP(<span class="string">&#x27;bac&#x27;</span>,<span class="string">&#x27;def&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> hellohellohellohello <span class="operator">|</span>          <span class="operator">|</span>                  <span class="number">-1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 子字符串,定位,取指定字符串，获取位置</span></span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>,<span class="number">2</span>),LOCATE(<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>),LOCATE(<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>),ELT(<span class="number">2</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>),FIELD(<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;gg&#x27;</span>,<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;mm&#x27;</span>),FIND_IN_SET(<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;gg,mm,jj,mm&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+---------------------+------------------------+----------------------------+---------------------------------+</span></span><br><span class="line"><span class="operator">|</span> SUBSTR(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>,<span class="number">2</span>) <span class="operator">|</span> LOCATE(<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>) <span class="operator">|</span> LOCATE(<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>) <span class="operator">|</span> ELT(<span class="number">2</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>) <span class="operator">|</span> FIELD(<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;gg&#x27;</span>,<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;mm&#x27;</span>) <span class="operator">|</span> FIND_IN_SET(<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;gg,mm,jj,mm&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+---------------------+------------------------+----------------------------+---------------------------------+</span></span><br><span class="line"><span class="operator">|</span> el                  <span class="operator">|</span>                   <span class="number">3</span> <span class="operator">|</span>                   <span class="number">0</span> <span class="operator">|</span> b                      <span class="operator">|</span>                          <span class="number">2</span> <span class="operator">|</span>                               <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+---------------------+------------------------+----------------------------+---------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 反转</span></span><br><span class="line"><span class="keyword">SELECT</span> REVERSE(<span class="string">&#x27;abc&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> REVERSE(<span class="string">&#x27;abc&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> cba            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 比较，相等返回null，不等返回前面一个</span></span><br><span class="line"><span class="keyword">SELECT</span> dept_id,<span class="built_in">NULLIF</span>(LENGTH(lname),LENGTH(fname)) &quot;common_name&quot; <span class="keyword">FROM</span> employee;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-------------+</span></span><br><span class="line"><span class="operator">|</span> dept_id <span class="operator">|</span> common_name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>           <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>           <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>           <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">9</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>           <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">8</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>        <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>        <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>           <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-------------+</span></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 获取时间</span></span><br><span class="line"><span class="keyword">SELECT</span> CURDATE(), CURTIME(), NOW(), SYSDATE()<span class="operator">+</span><span class="number">0</span>, UTC_DATE(), UTC_DATE()<span class="operator">+</span><span class="number">0</span>, UTC_TIME(), UTC_TIME()<span class="operator">+</span><span class="number">8</span> <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-----------+---------------------+----------------+------------+--------------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> CURDATE()  <span class="operator">|</span> CURTIME() <span class="operator">|</span> NOW()               <span class="operator">|</span> SYSDATE()<span class="operator">+</span><span class="number">0</span>    <span class="operator">|</span> UTC_DATE() <span class="operator">|</span> UTC_DATE()<span class="operator">+</span><span class="number">0</span> <span class="operator">|</span> UTC_TIME() <span class="operator">|</span> UTC_TIME()<span class="operator">+</span><span class="number">8</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-----------+---------------------+----------------+------------+--------------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">09</span>:<span class="number">14</span>:<span class="number">25</span>  <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">09</span>:<span class="number">14</span>:<span class="number">25</span> <span class="operator">|</span> <span class="number">20221028091425</span> <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="operator">|</span>     <span class="number">20221028</span> <span class="operator">|</span> <span class="number">09</span>:<span class="number">14</span>:<span class="number">25</span>   <span class="operator">|</span>        <span class="number">91433</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-----------+---------------------+----------------+------------+--------------+------------+--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 日期和时间戳的转换</span></span><br><span class="line"><span class="keyword">SELECT</span> UNIX_TIMESTAMP(),FROM_UNIXTIME(<span class="number">1666944191</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> UNIX_TIMESTAMP() <span class="operator">|</span> FROM_UNIXTIME(<span class="number">1666944191</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1666948475</span> <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">08</span>:<span class="number">03</span>:<span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+---------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回具体时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span> (CURDATE()), <span class="keyword">MONTH</span>(CURDATE()), <span class="keyword">DAY</span>(CURDATE()), <span class="keyword">HOUR</span>(CURTIME()),<span class="keyword">MINUTE</span>(NOW()) , <span class="keyword">SECOND</span>(SYSDATE()) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+------------------+----------------+-----------------+---------------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">YEAR</span> (CURDATE()) <span class="operator">|</span> <span class="keyword">MONTH</span>(CURDATE()) <span class="operator">|</span> <span class="keyword">DAY</span>(CURDATE()) <span class="operator">|</span> <span class="keyword">HOUR</span>(CURTIME()) <span class="operator">|</span> <span class="keyword">MINUTE</span>(NOW()) <span class="operator">|</span> <span class="keyword">SECOND</span>(SYSDATE()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+------------------+----------------+-----------------+---------------+-------------------+</span></span><br><span class="line"><span class="operator">|</span>             <span class="number">2022</span> <span class="operator">|</span>               <span class="number">10</span> <span class="operator">|</span>             <span class="number">28</span> <span class="operator">|</span>               <span class="number">9</span> <span class="operator">|</span>            <span class="number">14</span> <span class="operator">|</span>                <span class="number">41</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+------------------+----------------+-----------------+---------------+-------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回月份、星期</span></span><br><span class="line"><span class="keyword">SELECT</span> MONTHNAME(<span class="string">&#x27;2021-10-26&#x27;</span>),DAYNAME(<span class="string">&#x27;2021-10-26&#x27;</span>),WEEKDAY(<span class="string">&#x27;2021-10-26&#x27;</span>),QUARTER(CURDATE()),WEEK(CURDATE()),DAYOFYEAR(NOW()),DAYOFMONTH(NOW()),DAYOFWEEK(NOW()) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-----------------------+-----------------------+--------------------+-----------------+------------------+-------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> MONTHNAME(<span class="string">&#x27;2021-10-26&#x27;</span>) <span class="operator">|</span> DAYNAME(<span class="string">&#x27;2021-10-26&#x27;</span>) <span class="operator">|</span> WEEKDAY(<span class="string">&#x27;2021-10-26&#x27;</span>) <span class="operator">|</span> QUARTER(CURDATE()) <span class="operator">|</span> WEEK(CURDATE()) <span class="operator">|</span> DAYOFYEAR(NOW()) <span class="operator">|</span> DAYOFMONTH(NOW()) <span class="operator">|</span> DAYOFWEEK(NOW()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-----------------------+-----------------------+--------------------+-----------------+------------------+-------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> October                 <span class="operator">|</span> Tuesday               <span class="operator">|</span>                     <span class="number">1</span> <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span>              <span class="number">43</span> <span class="operator">|</span>              <span class="number">301</span> <span class="operator">|</span>                <span class="number">28</span> <span class="operator">|</span>                <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-----------------------+-----------------------+--------------------+-----------------+------------------+-------------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 时间的操作函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(<span class="keyword">SECOND</span> <span class="keyword">FROM</span> NOW()),<span class="built_in">EXTRACT</span>(<span class="keyword">DAY</span> <span class="keyword">FROM</span> NOW()),<span class="built_in">EXTRACT</span>(HOUR_MINUTE <span class="keyword">FROM</span> NOW()),<span class="built_in">EXTRACT</span>(QUARTER <span class="keyword">FROM</span> NOW()) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+-------------------------+---------------------------------+-----------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">EXTRACT</span>(<span class="keyword">SECOND</span> <span class="keyword">FROM</span> NOW()) <span class="operator">|</span> <span class="built_in">EXTRACT</span>(<span class="keyword">DAY</span> <span class="keyword">FROM</span> NOW()) <span class="operator">|</span> <span class="built_in">EXTRACT</span>(HOUR_MINUTE <span class="keyword">FROM</span> NOW()) <span class="operator">|</span> <span class="built_in">EXTRACT</span>(QUARTER <span class="keyword">FROM</span> NOW()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+-------------------------+---------------------------------+-----------------------------+</span></span><br><span class="line"><span class="operator">|</span>                         <span class="number">11</span> <span class="operator">|</span>                      <span class="number">28</span> <span class="operator">|</span>                             <span class="number">915</span> <span class="operator">|</span>                           <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+-------------------------+---------------------------------+-----------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 时钟和秒数转换</span></span><br><span class="line"><span class="keyword">SELECT</span> TIME_TO_SEC(CURTIME()),SEC_TO_TIME(<span class="number">29521</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> TIME_TO_SEC(CURTIME()) <span class="operator">|</span> SEC_TO_TIME(<span class="number">29521</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">33320</span> <span class="operator">|</span> <span class="number">08</span>:<span class="number">12</span>:<span class="number">01</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 计算日期和时间</span></span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(NOW() ,<span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">HOUR</span>),DATE_ADD(NOW() ,<span class="type">INTERVAL</span> <span class="number">-1</span> <span class="keyword">HOUR</span>),DATE_SUB(NOW() ,<span class="type">INTERVAL</span> <span class="number">-1</span> <span class="keyword">HOUR</span>),DATE_ADD(NOW() ,<span class="type">INTERVAL</span> <span class="string">&#x27;1_1&#x27;</span> YEAR_MONTH),DATE_ADD(NOW() ,<span class="type">INTERVAL</span> <span class="string">&#x27;1_1&#x27;</span> HOUR_MINUTE) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+-----------------------------------+-----------------------------------+--------------------------------------------+---------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> DATE_ADD(NOW() ,<span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">HOUR</span>) <span class="operator">|</span> DATE_ADD(NOW() ,<span class="type">INTERVAL</span> <span class="number">-1</span> <span class="keyword">HOUR</span>) <span class="operator">|</span> DATE_SUB(NOW() ,<span class="type">INTERVAL</span> <span class="number">-1</span> <span class="keyword">HOUR</span>) <span class="operator">|</span> DATE_ADD(NOW() ,<span class="type">INTERVAL</span> <span class="string">&#x27;1_1&#x27;</span> YEAR_MONTH) <span class="operator">|</span> DATE_ADD(NOW() ,<span class="type">INTERVAL</span> <span class="string">&#x27;1_1&#x27;</span> HOUR_MINUTE) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+-----------------------------------+-----------------------------------+--------------------------------------------+---------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">10</span>:<span class="number">15</span>:<span class="number">33</span>              <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">08</span>:<span class="number">15</span>:<span class="number">33</span>               <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">10</span>:<span class="number">15</span>:<span class="number">33</span>               <span class="operator">|</span> <span class="number">2023</span><span class="number">-11</span><span class="number">-28</span> <span class="number">09</span>:<span class="number">15</span>:<span class="number">33</span>                        <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">10</span>:<span class="number">16</span>:<span class="number">33</span>                         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+-----------------------------------+-----------------------------------+--------------------------------------------+---------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ADDTIME(NOW(),<span class="number">20</span>), SUBTIME(NOW(), <span class="number">30</span>), SUBTIME(NOW(), <span class="string">&#x27;1:1:3&#x27;</span>), DATEDIFF(NOW(), <span class="string">&#x27;2022-10-01&#x27;</span>), TIMEDIFF(NOW(), <span class="string">&#x27;2022-10-28 22:18:10&#x27;</span>), FROM_DAYS(<span class="number">366</span>), TO_DAYS(<span class="string">&#x27;0000-12-25&#x27;</span>), LAST_DAY(NOW()), MAKEDATE(<span class="keyword">YEAR</span>(NOW()), <span class="number">12</span>), MAKETIME(<span class="number">10</span>,<span class="number">21</span>,<span class="number">23</span>),PERIOD_ADD(<span class="number">20200101010101</span>, <span class="number">10</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+-------------------------+-------------------------------+----------------------------------------+----------------+-----------------------+-----------------+---------------------------+--------------------+--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> ADDTIME(NOW(),<span class="number">20</span>)   <span class="operator">|</span> SUBTIME(NOW(), <span class="number">30</span>)  <span class="operator">|</span> SUBTIME(NOW(), <span class="string">&#x27;1:1:3&#x27;</span>) <span class="operator">|</span> DATEDIFF(NOW(), <span class="string">&#x27;2022-10-01&#x27;</span>) <span class="operator">|</span> TIMEDIFF(NOW(), <span class="string">&#x27;2022-10-28 22:18:10&#x27;</span>) <span class="operator">|</span> FROM_DAYS(<span class="number">366</span>) <span class="operator">|</span> TO_DAYS(<span class="string">&#x27;0000-12-25&#x27;</span>) <span class="operator">|</span> LAST_DAY(NOW()) <span class="operator">|</span> MAKEDATE(<span class="keyword">YEAR</span>(NOW()), <span class="number">12</span>) <span class="operator">|</span> MAKETIME(<span class="number">10</span>,<span class="number">21</span>,<span class="number">23</span>) <span class="operator">|</span> PERIOD_ADD(<span class="number">20200101010101</span>, <span class="number">10</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+-------------------------+-------------------------------+----------------------------------------+----------------+-----------------------+-----------------+---------------------------+--------------------+--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">09</span>:<span class="number">16</span>:<span class="number">32</span> <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">09</span>:<span class="number">15</span>:<span class="number">42</span> <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">08</span>:<span class="number">15</span>:<span class="number">09</span>     <span class="operator">|</span>                            <span class="number">27</span> <span class="operator">|</span> <span class="number">-13</span>:<span class="number">01</span>:<span class="number">58</span>                              <span class="operator">|</span> <span class="number">0001</span><span class="number">-01</span><span class="number">-01</span>     <span class="operator">|</span>                   <span class="number">359</span> <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-31</span>      <span class="operator">|</span> <span class="number">2022</span><span class="number">-01</span><span class="number">-12</span>                <span class="operator">|</span> <span class="number">10</span>:<span class="number">21</span>:<span class="number">23</span>           <span class="operator">|</span>                 <span class="number">20200101010111</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+-------------------------+-------------------------------+----------------------------------------+----------------+-----------------------+-----------------+---------------------------+--------------------+--------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 格式化与解析</span></span><br><span class="line"><span class="keyword">SELECT</span> DATE_FORMAT(CURDATE(),<span class="string">&#x27;%Y-%M_%D&#x27;</span>),DATE_FORMAT(NOW(),<span class="string">&#x27;%Y-%m-%d&#x27;</span>),TIME_FORMAT(CURTIME(),<span class="string">&#x27;%h:%i:%s&#x27;</span>),DATE_FORMAT(NOW(),<span class="string">&#x27;%Y-%M-%D %h:%i:%S %W %w %T %t %r&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------+-------------------------------+-----------------------------------+------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> DATE_FORMAT(CURDATE(),<span class="string">&#x27;%Y-%M_%D&#x27;</span>) <span class="operator">|</span> DATE_FORMAT(NOW(),<span class="string">&#x27;%Y-%m-%d&#x27;</span>) <span class="operator">|</span> TIME_FORMAT(CURTIME(),<span class="string">&#x27;%h:%i:%s&#x27;</span>) <span class="operator">|</span> DATE_FORMAT(NOW(),<span class="string">&#x27;%Y-%M-%D %h:%i:%S %W %w %T %t %r&#x27;</span>)      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------+-------------------------------+-----------------------------------+------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="operator">-</span>October_28th                 <span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span>                    <span class="operator">|</span> <span class="number">09</span>:<span class="number">16</span>:<span class="number">35</span>                          <span class="operator">|</span> <span class="number">2022</span><span class="operator">-</span>October<span class="number">-28</span>th <span class="number">09</span>:<span class="number">16</span>:<span class="number">35</span> Friday <span class="number">5</span> <span class="number">09</span>:<span class="number">16</span>:<span class="number">35</span> t <span class="number">09</span>:<span class="number">16</span>:<span class="number">35</span> AM <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------+-------------------------------+-----------------------------------+------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> STR_TO_DATE(<span class="string">&#x27;2022-October-28th 08:23:55&#x27;</span>,<span class="string">&#x27;%Y-%M-%D %h:%i:%S&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> STR_TO_DATE(<span class="string">&#x27;2022-October-28th 08:23:55&#x27;</span>,<span class="string">&#x27;%Y-%M-%D %h:%i:%S&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-10</span><span class="number">-28</span> <span class="number">08</span>:<span class="number">23</span>:<span class="number">55</span>                                           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> GET_FORMAT(<span class="type">DATE</span>, <span class="string">&#x27;USA&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> GET_FORMAT(<span class="type">DATE</span>, <span class="string">&#x27;USA&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="operator">%</span>m.<span class="operator">%</span>d.<span class="operator">%</span>Y                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 判断</span></span><br><span class="line"><span class="keyword">SELECT</span> IF(<span class="number">1</span><span class="operator">&gt;</span><span class="number">0</span>,<span class="string">&#x27;正确&#x27;</span>,<span class="string">&#x27;错误&#x27;</span>),IFNULL(<span class="keyword">NULL</span>,<span class="string">&#x27;空&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> IF(<span class="number">1</span><span class="operator">&gt;</span><span class="number">0</span>,<span class="string">&#x27;正确&#x27;</span>,<span class="string">&#x27;错误&#x27;</span>)     <span class="operator">|</span> IFNULL(<span class="keyword">NULL</span>,<span class="string">&#x27;空&#x27;</span>)  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> 正确                      <span class="operator">|</span> 空                 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 条件</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span>	<span class="keyword">WHEN</span> <span class="number">1</span> <span class="operator">&gt;</span> <span class="number">2</span> <span class="keyword">THEN</span>	<span class="string">&#x27;错误&#x27;</span> <span class="keyword">ELSE</span> <span class="string">&#x27;正确&#x27;</span> <span class="keyword">END</span> &quot;测试&quot; <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> 测试   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> 正确   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="加密和解密"><a href="#加密和解密" class="headerlink" title="加密和解密"></a>加密和解密</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 加密与解密 </span></span><br><span class="line"><span class="comment">-- PASSWORD()函数在8.0中被弃用</span></span><br><span class="line"><span class="keyword">SELECT</span> PASSWORD(<span class="string">&#x27;123456&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;(&#x27;</span><span class="number">123456</span><span class="string">&#x27;) FROM DUAL&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> MD5(<span class="string">&#x27;123456&#x27;</span>),SHA(<span class="string">&#x27;123456&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> MD5(<span class="string">&#x27;123456&#x27;</span>)                    <span class="operator">|</span> SHA(<span class="string">&#x27;123456&#x27;</span>)                            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> e10adc3949ba59abbe56e057f20f883e <span class="operator">|</span> <span class="number">7</span>c4a8d09ca3762af61e59520943dc26494f8941b <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">--  ENCODE() 和 DECODE() 在8.0都弃用</span></span><br><span class="line"><span class="keyword">SELECT</span> ENCODE(<span class="string">&#x27;mitata&#x27;</span>,<span class="string">&#x27;mysql&#x27;</span>),DECODE(<span class="string">&#x27;mitaka&#x27;</span>,<span class="string">&#x27;mysql&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line">ERROR <span class="number">1305</span> (<span class="number">42000</span>): <span class="keyword">FUNCTION</span> mitaka.ENCODE does <span class="keyword">not</span> exist</span><br></pre></td></tr></table></figure>

<h3 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 信息函数</span></span><br><span class="line"><span class="keyword">SELECT</span> VERSION(),CONNECTION_ID(),DATABASE(),SCHEMA(),<span class="keyword">USER</span>(),<span class="built_in">CURRENT_USER</span>(),CHARSET(<span class="string">&#x27;小夜时雨&#x27;</span>),<span class="keyword">COLLATION</span>(<span class="string">&#x27;小夜时雨&#x27;</span>) <span class="keyword">from</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-----------------+------------+----------+-----------------+----------------+-------------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> VERSION() <span class="operator">|</span> CONNECTION_ID() <span class="operator">|</span> DATABASE() <span class="operator">|</span> SCHEMA() <span class="operator">|</span> <span class="keyword">USER</span>()          <span class="operator">|</span> <span class="built_in">CURRENT_USER</span>() <span class="operator">|</span> CHARSET(<span class="string">&#x27;小夜时雨&#x27;</span>)     <span class="operator">|</span> <span class="keyword">COLLATION</span>(<span class="string">&#x27;小夜时雨&#x27;</span>)     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-----------------+------------+----------+-----------------+----------------+-------------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">8.0</span><span class="number">.31</span>    <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span> mitaka     <span class="operator">|</span> mitaka   <span class="operator">|</span> root<span class="variable">@172</span><span class="number">.17</span><span class="number">.0</span><span class="number">.1</span> <span class="operator">|</span> root@<span class="operator">%</span>         <span class="operator">|</span> utf8mb4                 <span class="operator">|</span> utf8mb4_0900_ai_ci        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-----------------+------------+----------+-----------------+----------------+-------------------------+---------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 保留小数</span></span><br><span class="line"><span class="keyword">SELECT</span> FORMAT(<span class="number">123.12356</span>,<span class="number">2</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> FORMAT(<span class="number">123.12356</span>,<span class="number">2</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">123.12</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 进制转换</span></span><br><span class="line"><span class="keyword">SELECT</span> CONV(<span class="number">16</span>,<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span> CONV(<span class="number">16</span>,<span class="number">10</span>,<span class="number">2</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10000</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- IP地址转换</span></span><br><span class="line"><span class="keyword">SELECT</span> INET_ATON(<span class="string">&#x27;192.168.1.1&#x27;</span>),INET_NTOA(<span class="number">3232235777</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span> INET_ATON(<span class="string">&#x27;192.168.1.1&#x27;</span>) <span class="operator">|</span> INET_NTOA(<span class="number">3232235777</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span>               <span class="number">3232235777</span> <span class="operator">|</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+-----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 表达式执行n次，用于测试表达式耗费时间</span></span><br><span class="line"><span class="keyword">SELECT</span> BENCHMARK(<span class="number">100000</span>, MD5(<span class="string">&#x27;mysql&#x27;</span>)) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"><span class="operator">|</span> BENCHMARK(<span class="number">100000</span>, MD5(<span class="string">&#x27;mysql&#x27;</span>)) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"><span class="operator">|</span>                               <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.05</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符集切换表示</span></span><br><span class="line"><span class="keyword">SELECT</span> CHARSET(<span class="string">&#x27;mitaka&#x27;</span>),CHARSET(<span class="keyword">CONVERT</span>(<span class="string">&#x27;mitaka&#x27;</span> <span class="keyword">USING</span> <span class="string">&#x27;utf8mb3&#x27;</span>)) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+--------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> CHARSET(<span class="string">&#x27;mitaka&#x27;</span>) <span class="operator">|</span> CHARSET(<span class="keyword">CONVERT</span>(<span class="string">&#x27;mitaka&#x27;</span> <span class="keyword">USING</span> <span class="string">&#x27;utf8mb3&#x27;</span>)) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+--------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> utf8mb4           <span class="operator">|</span> utf8mb3                                    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+--------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><p>对一组数据进行汇总的函数，输入的是一组数据的集合，输出的是单个值。聚合函数作用于一组数据，并对一组数据返回一个值。</p>
<h3 id="常见的聚合函数"><a href="#常见的聚合函数" class="headerlink" title="常见的聚合函数"></a>常见的聚合函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 平均值和总和，只适用于数值类型</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(avail_balance),<span class="built_in">SUM</span>(avail_balance),<span class="built_in">AVG</span>(avail_balance) <span class="operator">*</span> <span class="number">2844047</span> <span class="keyword">FROM</span> account;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">AVG</span>(avail_balance) <span class="operator">|</span> <span class="built_in">SUM</span>(avail_balance) <span class="operator">|</span> <span class="built_in">AVG</span>(avail_balance) <span class="operator">*</span> <span class="number">2844047</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+------------------------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">7114.769138</span> <span class="operator">|</span>          <span class="number">170754.46</span> <span class="operator">|</span>           <span class="number">20234737822.673504</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 非数值类型的求平均和总和没有意义</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(fname),<span class="built_in">AVG</span>(lname),<span class="built_in">SUM</span>(start_date) <span class="keyword">FROM</span> employee;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">SUM</span>(fname) <span class="operator">|</span> <span class="built_in">AVG</span>(lname) <span class="operator">|</span> <span class="built_in">SUM</span>(start_date) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">0</span> <span class="operator">|</span>          <span class="number">0</span> <span class="operator">|</span>       <span class="number">380383165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------------+-----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">38</span> warnings (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 最大最小</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(avail_balance),<span class="built_in">MIN</span>(avail_balance) <span class="keyword">FROM</span> account;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">MAX</span>(avail_balance) <span class="operator">|</span> <span class="built_in">MIN</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">50000.00</span> <span class="operator">|</span>               <span class="number">0.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串可以比较大小</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(fname),<span class="built_in">MIN</span>(lname) <span class="keyword">FROM</span> employee;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">MAX</span>(fname) <span class="operator">|</span> <span class="built_in">MIN</span>(lname) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------------+</span></span><br><span class="line"><span class="operator">|</span> Thomas     <span class="operator">|</span> Barker     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 计算指定字段在查询结构中出现的个数</span></span><br><span class="line"><span class="comment">-- 查询结构中出现的个数，2 * fname 是将fname乘以2，实际数据还是一条</span></span><br><span class="line"><span class="comment">-- count(1)代表将数据充当1，然后计算1的条目,count(*)代表获取所有的条目</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(emp_id),<span class="built_in">COUNT</span>(fname),<span class="built_in">COUNT</span>(<span class="number">2</span> <span class="operator">*</span> fname),<span class="built_in">COUNT</span>(<span class="number">1</span>),<span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> employee;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+--------------+------------------+----------+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">COUNT</span>(emp_id) <span class="operator">|</span> <span class="built_in">COUNT</span>(fname) <span class="operator">|</span> <span class="built_in">COUNT</span>(<span class="number">2</span> <span class="operator">*</span> fname) <span class="operator">|</span> <span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="operator">|</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+--------------+------------------+----------+----------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">19</span> <span class="operator">|</span>           <span class="number">19</span> <span class="operator">|</span>               <span class="number">19</span> <span class="operator">|</span>       <span class="number">19</span> <span class="operator">|</span>       <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+--------------+------------------+----------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 需要注意的是，如果字段是null，则count不计入,COUNT(*)是19,COUNT(dept_id)是18</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>),<span class="built_in">COUNT</span>(dept_id) <span class="keyword">FROM</span> employee;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">|</span> <span class="built_in">COUNT</span>(dept_id) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">19</span> <span class="operator">|</span>             <span class="number">18</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 平均值不计算null的行</span></span><br><span class="line"><span class="comment">-- 也就是 AVG(avail_balance) = SUM(avail_balance) / COUNT(avail_balance)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(avail_balance) , <span class="built_in">SUM</span>(avail_balance) <span class="operator">/</span> <span class="built_in">COUNT</span>(avail_balance) <span class="keyword">FROM</span> account;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">AVG</span>(avail_balance) <span class="operator">|</span> <span class="built_in">SUM</span>(avail_balance) <span class="operator">/</span> <span class="built_in">COUNT</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">7114.769138</span> <span class="operator">|</span>                               <span class="number">7114.769138</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- COUNT(expr) 计算行数，使用 count(*),count(1),count(字段)哪个效率高，</span></span><br><span class="line"><span class="comment">-- 如果使用MyISAM存储引擎，则效率一致，因为metadata存储了count，效率是o(1)</span></span><br><span class="line"><span class="comment">-- 如果使用InnoDB存储引擎，则 COUNT(*) = COUNT(1) &gt; COUNT(字段)</span></span><br></pre></td></tr></table></figure>

<h3 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h3><p>分组</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 按照分组求组中平均数</span></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,<span class="built_in">AVG</span>(avail_balance),<span class="built_in">SUM</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_emp_id;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> open_emp_id <span class="operator">|</span> <span class="built_in">AVG</span>(avail_balance) <span class="operator">|</span> <span class="built_in">SUM</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span>        <span class="number">3485.321208</span> <span class="operator">|</span>           <span class="number">27882.57</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span>        <span class="number">3051.617118</span> <span class="operator">|</span>           <span class="number">21361.32</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span>       <span class="number">17756.750000</span> <span class="operator">|</span>           <span class="number">53270.25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span>       <span class="number">11373.386637</span> <span class="operator">|</span>           <span class="number">68240.32</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+--------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用多个列分组，也就是分组后再分组</span></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,product_cd,<span class="built_in">AVG</span>(avail_balance),<span class="built_in">SUM</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_emp_id,product_cd;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> open_emp_id <span class="operator">|</span> product_cd <span class="operator">|</span> <span class="built_in">AVG</span>(avail_balance) <span class="operator">|</span> <span class="built_in">SUM</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span> CHK        <span class="operator">|</span>        <span class="number">1657.885010</span> <span class="operator">|</span>            <span class="number">3315.77</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span> SAV        <span class="operator">|</span>         <span class="number">350.000000</span> <span class="operator">|</span>             <span class="number">700.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span> CD         <span class="operator">|</span>        <span class="number">4000.000000</span> <span class="operator">|</span>            <span class="number">8000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span> CHK        <span class="operator">|</span>        <span class="number">1057.750000</span> <span class="operator">|</span>            <span class="number">1057.75</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span> MM         <span class="operator">|</span>        <span class="number">2212.500000</span> <span class="operator">|</span>            <span class="number">2212.50</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span> CHK        <span class="operator">|</span>         <span class="number">260.719999</span> <span class="operator">|</span>             <span class="number">782.16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span> SAV        <span class="operator">|</span>         <span class="number">767.770020</span> <span class="operator">|</span>             <span class="number">767.77</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span> MM         <span class="operator">|</span>        <span class="number">7416.319824</span> <span class="operator">|</span>           <span class="number">14832.64</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span> CHK        <span class="operator">|</span>       <span class="number">16963.082458</span> <span class="operator">|</span>           <span class="number">67852.33</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span> CD         <span class="operator">|</span>        <span class="number">5750.000000</span> <span class="operator">|</span>           <span class="number">11500.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span> SAV        <span class="operator">|</span>         <span class="number">387.989990</span> <span class="operator">|</span>             <span class="number">387.99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span> BUS        <span class="operator">|</span>           <span class="number">0.000000</span> <span class="operator">|</span>               <span class="number">0.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span> BUS        <span class="operator">|</span>        <span class="number">9345.549805</span> <span class="operator">|</span>            <span class="number">9345.55</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span> SBL        <span class="operator">|</span>       <span class="number">50000.000000</span> <span class="operator">|</span>           <span class="number">50000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+------------+--------------------+--------------------+</span></span><br><span class="line"><span class="number">14</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 分组顺序的前后，结果是一样的</span></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,product_cd,<span class="built_in">AVG</span>(avail_balance),<span class="built_in">SUM</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">GROUP</span> <span class="keyword">BY</span> product_cd,open_emp_id;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> open_emp_id <span class="operator">|</span> product_cd <span class="operator">|</span> <span class="built_in">AVG</span>(avail_balance) <span class="operator">|</span> <span class="built_in">SUM</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span> CHK        <span class="operator">|</span>        <span class="number">1657.885010</span> <span class="operator">|</span>            <span class="number">3315.77</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span> SAV        <span class="operator">|</span>         <span class="number">350.000000</span> <span class="operator">|</span>             <span class="number">700.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span> CD         <span class="operator">|</span>        <span class="number">4000.000000</span> <span class="operator">|</span>            <span class="number">8000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span> CHK        <span class="operator">|</span>        <span class="number">1057.750000</span> <span class="operator">|</span>            <span class="number">1057.75</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span> MM         <span class="operator">|</span>        <span class="number">2212.500000</span> <span class="operator">|</span>            <span class="number">2212.50</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span> CHK        <span class="operator">|</span>         <span class="number">260.719999</span> <span class="operator">|</span>             <span class="number">782.16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span> SAV        <span class="operator">|</span>         <span class="number">767.770020</span> <span class="operator">|</span>             <span class="number">767.77</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span> MM         <span class="operator">|</span>        <span class="number">7416.319824</span> <span class="operator">|</span>           <span class="number">14832.64</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span> CHK        <span class="operator">|</span>       <span class="number">16963.082458</span> <span class="operator">|</span>           <span class="number">67852.33</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span> CD         <span class="operator">|</span>        <span class="number">5750.000000</span> <span class="operator">|</span>           <span class="number">11500.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span> SAV        <span class="operator">|</span>         <span class="number">387.989990</span> <span class="operator">|</span>             <span class="number">387.99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span> BUS        <span class="operator">|</span>           <span class="number">0.000000</span> <span class="operator">|</span>               <span class="number">0.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span> BUS        <span class="operator">|</span>        <span class="number">9345.549805</span> <span class="operator">|</span>            <span class="number">9345.55</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span> SBL        <span class="operator">|</span>       <span class="number">50000.000000</span> <span class="operator">|</span>           <span class="number">50000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+------------+--------------------+--------------------+</span></span><br><span class="line"><span class="number">14</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 但是，分组之后，如果select的字段没有被分组，则会报错。SELECT中出现的非组函数的字段必须生命在 GROUP BY中</span></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,product_cd,<span class="built_in">AVG</span>(avail_balance),<span class="built_in">SUM</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_emp_id;</span><br><span class="line">ERROR <span class="number">1055</span> (<span class="number">42000</span>): Expression #<span class="number">2</span> <span class="keyword">of</span> <span class="keyword">SELECT</span> list <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> clause <span class="keyword">and</span> <span class="keyword">contains</span> nonaggregated <span class="keyword">column</span> <span class="string">&#x27;mitaka.account.product_cd&#x27;</span> which <span class="keyword">is</span> <span class="keyword">not</span> functionally dependent <span class="keyword">on</span> columns <span class="keyword">in</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> clause; this <span class="keyword">is</span> incompatible <span class="keyword">with</span> sql_mode<span class="operator">=</span>only_full_group_by</span><br><span class="line"></span><br><span class="line"><span class="comment">-- MySQL 中使用 WITH ROLLUP，可以计算总体作为一组。</span></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,<span class="built_in">AVG</span>(avail_balance),<span class="built_in">SUM</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_emp_id <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> open_emp_id <span class="operator">|</span> <span class="built_in">AVG</span>(avail_balance) <span class="operator">|</span> <span class="built_in">SUM</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span>        <span class="number">3485.321208</span> <span class="operator">|</span>           <span class="number">27882.57</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span>        <span class="number">3051.617118</span> <span class="operator">|</span>           <span class="number">21361.32</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span>       <span class="number">17756.750000</span> <span class="operator">|</span>           <span class="number">53270.25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span>       <span class="number">11373.386637</span> <span class="operator">|</span>           <span class="number">68240.32</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="keyword">NULL</span> <span class="operator">|</span>        <span class="number">7114.769138</span> <span class="operator">|</span>          <span class="number">170754.46</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+--------------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- MySQL 8.0.12 之前，WITH ROLLUP 无法与 ORDER BY联合使用。</span></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,<span class="built_in">AVG</span>(avail_balance),<span class="built_in">SUM</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_emp_id <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> open_emp_id <span class="keyword">ASC</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> open_emp_id <span class="operator">|</span> <span class="built_in">AVG</span>(avail_balance) <span class="operator">|</span> <span class="built_in">SUM</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="keyword">NULL</span> <span class="operator">|</span>        <span class="number">7114.769138</span> <span class="operator">|</span>          <span class="number">170754.46</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span>        <span class="number">3485.321208</span> <span class="operator">|</span>           <span class="number">27882.57</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">10</span> <span class="operator">|</span>        <span class="number">3051.617118</span> <span class="operator">|</span>           <span class="number">21361.32</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span>       <span class="number">17756.750000</span> <span class="operator">|</span>           <span class="number">53270.25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span>       <span class="number">11373.386637</span> <span class="operator">|</span>           <span class="number">68240.32</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+--------------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="HAVING"><a href="#HAVING" class="headerlink" title="HAVING"></a>HAVING</h3><p>用于过滤数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 分组之后，过滤掉 低于10000的</span></span><br><span class="line"><span class="comment">-- 如果过滤条件中使用聚合功能,WHERE 不能使用聚合函数，必须使用having替换where，并且 HAVING 比如声明在 GROUP BY 后面</span></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,<span class="built_in">MAX</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">WHERE</span> <span class="built_in">MAX</span>(avail_balance) <span class="operator">&gt;</span> <span class="number">10000</span>  <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_emp_id;</span><br><span class="line">ERROR <span class="number">1111</span> (HY000): Invalid use <span class="keyword">of</span> <span class="keyword">group</span> <span class="keyword">function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,<span class="built_in">MAX</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_emp_id <span class="keyword">HAVING</span> <span class="built_in">MAX</span>(avail_balance) <span class="operator">&gt;</span> <span class="number">10000</span> ;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> open_emp_id <span class="operator">|</span> <span class="built_in">MAX</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span>           <span class="number">50000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">16</span> <span class="operator">|</span>           <span class="number">38552.05</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- HAVING不能单独使用，要与 GROUP BY 一起使用</span></span><br><span class="line"><span class="comment">-- 如果过滤条件不含有聚合函数，则可以使用 WHERE，而且相比之下，WHERE 效率更高</span></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,<span class="built_in">MAX</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">WHERE</span> open_emp_id <span class="keyword">IN</span> (<span class="number">13</span>) <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_emp_id <span class="keyword">HAVING</span> <span class="built_in">MAX</span>(avail_balance) <span class="operator">&gt;</span> <span class="number">10000</span> ;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> open_emp_id <span class="operator">|</span> <span class="built_in">MAX</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span>           <span class="number">50000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> open_emp_id,<span class="built_in">MAX</span>(avail_balance) <span class="keyword">FROM</span> account <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_emp_id <span class="keyword">HAVING</span> <span class="built_in">MAX</span>(avail_balance) <span class="operator">&gt;</span> <span class="number">10000</span> <span class="keyword">AND</span> open_emp_id <span class="keyword">IN</span> (<span class="number">13</span>) ;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> open_emp_id <span class="operator">|</span> <span class="built_in">MAX</span>(avail_balance) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">13</span> <span class="operator">|</span>           <span class="number">50000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<p><code>where</code> 的 效率比 <code>having</code> 高，可依据<code>SQL</code>执行过程来确定</p>
<p><code>SQL</code>执行过程</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 92语法</span></span><br><span class="line"><span class="keyword">SELECT</span> ...,<span class="keyword">DISTINCT</span>(...),... </span><br><span class="line"><span class="keyword">FROM</span> ...,... </span><br><span class="line"><span class="keyword">WHERE</span> 不包含聚合函数的过滤条件 <span class="keyword">AND</span> 连接表的条件 <span class="keyword">AND</span> ...</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ...</span><br><span class="line"><span class="keyword">HAVING</span> 包含聚合函数的过滤条件</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ... (<span class="keyword">ASC</span> <span class="operator">/</span> <span class="keyword">DESC</span>)</span><br><span class="line">LIMIT ...</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 99语法</span></span><br><span class="line"><span class="keyword">SELECT</span> ...,<span class="keyword">DISTINCT</span>(...),... </span><br><span class="line"><span class="keyword">FROM</span> ... </span><br><span class="line">(<span class="keyword">LEFT</span><span class="operator">/</span><span class="keyword">RIGHT</span>) <span class="keyword">JOIN</span> ... <span class="keyword">ON</span> 连接表的条件</span><br><span class="line">(<span class="keyword">LEFT</span><span class="operator">/</span><span class="keyword">RIGHT</span>) <span class="keyword">JOIN</span> ... <span class="keyword">ON</span> ...</span><br><span class="line"><span class="keyword">WHERE</span> 不包含聚合函数的过滤条件 <span class="keyword">AND</span> ...</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ...</span><br><span class="line"><span class="keyword">HAVING</span> 包含聚合函数的过滤条件</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ... (<span class="keyword">ASC</span> <span class="operator">/</span> <span class="keyword">DESC</span>)</span><br><span class="line">LIMIT ...</span><br></pre></td></tr></table></figure>

<p>每一个执行过程，会产生一个虚拟表，然后将这个虚拟表传入下一个步骤中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 执行顺序</span></span><br><span class="line"><span class="comment">-- 1. 先进行笛卡尔积，选取所有的表，在表中进行连接条件限制</span></span><br><span class="line"><span class="keyword">FROM</span> ...,... <span class="keyword">ON</span> </span><br><span class="line"><span class="comment">-- 2. 然后处理左外连接还是右外连接</span></span><br><span class="line">(<span class="keyword">LEFT</span><span class="operator">/</span><span class="keyword">RIGHT</span>) <span class="keyword">JOIN</span> ... <span class="keyword">ON</span> ...</span><br><span class="line">(<span class="keyword">LEFT</span><span class="operator">/</span><span class="keyword">RIGHT</span>) <span class="keyword">JOIN</span> ... <span class="keyword">ON</span> ...</span><br><span class="line"><span class="comment">-- 3. 然后将连接条件限制后，再通过 WHERE 条件进行过滤</span></span><br><span class="line"><span class="keyword">WHERE</span> ... <span class="keyword">AND</span> ...</span><br><span class="line"><span class="comment">-- 4. 将过滤后的数据进行分组</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ...</span><br><span class="line"><span class="comment">-- 5. 将分组后的数据通过 HAVING 过滤</span></span><br><span class="line"><span class="keyword">HAVING</span> 包含聚合函数的过滤条件</span><br><span class="line"><span class="comment">-- 6. 将组过滤后的数据，通过select 过滤列的数据，</span></span><br><span class="line"><span class="keyword">SELECT</span> ...,...,... </span><br><span class="line"><span class="comment">-- 7. 如果 列数据中有重复的，而且有 DISTINCT，则进行过滤</span></span><br><span class="line"><span class="keyword">DISTINCT</span></span><br><span class="line"><span class="comment">-- 8. 将最终的结果进行排序</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line"><span class="comment">-- 9. 排序后如果有分页，则进行分页</span></span><br><span class="line">LIMIT ...</span><br><span class="line"><span class="comment">-- 在这些执行过程中，每一个过程会产生一个虚拟表，然后将这个虚拟表传入下一个步骤中</span></span><br></pre></td></tr></table></figure>

<p><code>where</code>在<code>having</code>之前执行，可以过滤掉很多数据，在后续过程中则不需要进行分组，因此效率更高。</p>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>查询需要从结果集中获取数据，或者从一个表中先计算得出一个数据结果，然后与这个数据结果进行比较。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询入职时间比Jane早的</span></span><br><span class="line"><span class="keyword">SELECT</span> start_date <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> fname <span class="operator">=</span> <span class="string">&#x27;Jane&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> start_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2002</span><span class="number">-05</span><span class="number">-03</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> start_date <span class="operator">&gt;</span> <span class="string">&#x27;2002-05-03&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname    <span class="operator">|</span> lname   <span class="operator">|</span> start_date <span class="operator">|</span> end_date <span class="operator">|</span> superior_emp_id <span class="operator">|</span> dept_id <span class="operator">|</span> title          <span class="operator">|</span> assigned_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Susan    <span class="operator">|</span> Barker  <span class="operator">|</span> <span class="number">2002</span><span class="number">-09</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> Vice President <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> John     <span class="operator">|</span> Gooding <span class="operator">|</span> <span class="number">2003</span><span class="number">-11</span><span class="number">-14</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span> Loan Manager   <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Helen    <span class="operator">|</span> Fleming <span class="operator">|</span> <span class="number">2004</span><span class="number">-03</span><span class="number">-17</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller    <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Chris    <span class="operator">|</span> Tucker  <span class="operator">|</span> <span class="number">2004</span><span class="number">-09</span><span class="number">-15</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Sarah    <span class="operator">|</span> Parker  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-02</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Paula    <span class="operator">|</span> Roberts <span class="operator">|</span> <span class="number">2002</span><span class="number">-07</span><span class="number">-27</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller    <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Samantha <span class="operator">|</span> Jameson <span class="operator">|</span> <span class="number">2003</span><span class="number">-01</span><span class="number">-08</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Cindy    <span class="operator">|</span> Mason   <span class="operator">|</span> <span class="number">2002</span><span class="number">-08</span><span class="number">-09</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Frank    <span class="operator">|</span> Portman <span class="operator">|</span> <span class="number">2003</span><span class="number">-04</span><span class="number">-01</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Beth     <span class="operator">|</span> Fowler  <span class="operator">|</span> <span class="number">2002</span><span class="number">-06</span><span class="number">-29</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>此时需要执行两个查询语句，这个过程会消耗更多的网络资源，子查询就是可以将这两个查询语句合并成一个</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式1：使用多表连接，自连接</span></span><br><span class="line"><span class="keyword">SELECT</span> e2.emp_id, e2.start_date <span class="keyword">FROM</span> employee e1,employee e2 <span class="keyword">WHERE</span> e2.start_date <span class="operator">&gt;</span> e1.start_date <span class="keyword">AND</span> e1.fname <span class="operator">=</span> <span class="string">&#x27;Jane&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> start_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> <span class="number">2002</span><span class="number">-09</span><span class="number">-12</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> <span class="number">2003</span><span class="number">-11</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> <span class="number">2004</span><span class="number">-03</span><span class="number">-17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> <span class="number">2004</span><span class="number">-09</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-02</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> <span class="number">2002</span><span class="number">-07</span><span class="number">-27</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> <span class="number">2003</span><span class="number">-01</span><span class="number">-08</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> <span class="number">2002</span><span class="number">-08</span><span class="number">-09</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> <span class="number">2003</span><span class="number">-04</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> <span class="number">2002</span><span class="number">-06</span><span class="number">-29</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2：使用子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> start_date <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> start_date <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> fname <span class="operator">=</span> <span class="string">&#x27;Jane&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname    <span class="operator">|</span> lname   <span class="operator">|</span> start_date <span class="operator">|</span> end_date <span class="operator">|</span> superior_emp_id <span class="operator">|</span> dept_id <span class="operator">|</span> title          <span class="operator">|</span> assigned_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Susan    <span class="operator">|</span> Barker  <span class="operator">|</span> <span class="number">2002</span><span class="number">-09</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> Vice President <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> John     <span class="operator">|</span> Gooding <span class="operator">|</span> <span class="number">2003</span><span class="number">-11</span><span class="number">-14</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span> Loan Manager   <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Helen    <span class="operator">|</span> Fleming <span class="operator">|</span> <span class="number">2004</span><span class="number">-03</span><span class="number">-17</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller    <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Chris    <span class="operator">|</span> Tucker  <span class="operator">|</span> <span class="number">2004</span><span class="number">-09</span><span class="number">-15</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Sarah    <span class="operator">|</span> Parker  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-02</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Paula    <span class="operator">|</span> Roberts <span class="operator">|</span> <span class="number">2002</span><span class="number">-07</span><span class="number">-27</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller    <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Samantha <span class="operator">|</span> Jameson <span class="operator">|</span> <span class="number">2003</span><span class="number">-01</span><span class="number">-08</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Cindy    <span class="operator">|</span> Mason   <span class="operator">|</span> <span class="number">2002</span><span class="number">-08</span><span class="number">-09</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Frank    <span class="operator">|</span> Portman <span class="operator">|</span> <span class="number">2003</span><span class="number">-04</span><span class="number">-01</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Beth     <span class="operator">|</span> Fowler  <span class="operator">|</span> <span class="number">2002</span><span class="number">-06</span><span class="number">-29</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>称谓的规范：外查询、内查询或者主查询，子查询</p>
<ul>
<li><p>子查询在主查询之前一次执行完成</p>
</li>
<li><p>子查询的结果被主查询使用</p>
</li>
</ul>
<p>注意：</p>
<ul>
<li>子查询要在括号内</li>
<li>子查询放在比较条件的右侧</li>
<li>单行操作符对应单行子查询，多行操作符对应多行子查询</li>
</ul>
<p>子查询通过两种分类方式可以进行分类</p>
<ol>
<li><p>子查询返回结果数：</p>
<p>单行子查询：子查询结果只有1行</p>
<p>多行子查询：子查询结果可能有多个</p>
</li>
<li><p>子查询是否被执行多次</p>
<p>相关子查询：子查询条件会执行多次，与主查询条件有关联，例如查询全校学生成绩大于班级平均成绩，子查询条件需要与班级挂钩，每次查询都需要传入子查询进行查询</p>
<p>不相关子查询：子查询条件只执行一次，与主查询条件没有任何关联，例如查询全校学生成绩大于学校平均成绩，子查询条件与主查询条件无关，子查询只查询一次</p>
</li>
</ol>
<h3 id="单行子查询"><a href="#单行子查询" class="headerlink" title="单行子查询"></a>单行子查询</h3><p>单行操作符：<code>=</code> <code>!=</code> <code>&gt;</code> <code>&lt;</code> <code>&gt;=</code> <code>&lt;=</code> </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> start_date <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> start_date <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> fname <span class="operator">=</span> <span class="string">&#x27;Jane&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname    <span class="operator">|</span> lname   <span class="operator">|</span> start_date <span class="operator">|</span> end_date <span class="operator">|</span> superior_emp_id <span class="operator">|</span> dept_id <span class="operator">|</span> title          <span class="operator">|</span> assigned_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Susan    <span class="operator">|</span> Barker  <span class="operator">|</span> <span class="number">2002</span><span class="number">-09</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> Vice President <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> John     <span class="operator">|</span> Gooding <span class="operator">|</span> <span class="number">2003</span><span class="number">-11</span><span class="number">-14</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span> Loan Manager   <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Helen    <span class="operator">|</span> Fleming <span class="operator">|</span> <span class="number">2004</span><span class="number">-03</span><span class="number">-17</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller    <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Chris    <span class="operator">|</span> Tucker  <span class="operator">|</span> <span class="number">2004</span><span class="number">-09</span><span class="number">-15</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Sarah    <span class="operator">|</span> Parker  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-02</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Paula    <span class="operator">|</span> Roberts <span class="operator">|</span> <span class="number">2002</span><span class="number">-07</span><span class="number">-27</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller    <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Samantha <span class="operator">|</span> Jameson <span class="operator">|</span> <span class="number">2003</span><span class="number">-01</span><span class="number">-08</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Cindy    <span class="operator">|</span> Mason   <span class="operator">|</span> <span class="number">2002</span><span class="number">-08</span><span class="number">-09</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Frank    <span class="operator">|</span> Portman <span class="operator">|</span> <span class="number">2003</span><span class="number">-04</span><span class="number">-01</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Beth     <span class="operator">|</span> Fowler  <span class="operator">|</span> <span class="number">2002</span><span class="number">-06</span><span class="number">-29</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>如果单行子查询结果为<code>null</code>，则不会返回任何行。如果多行子查询结果包含<code>null</code>，</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 单行子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> start_date <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> start_date <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> fname <span class="operator">=</span> <span class="string">&#x27;mitaka&#x27;</span>);</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a>多行子查询</h3><p>多行操作符：</p>
<ul>
<li><code>IN</code>等于列表中的任意一个；</li>
<li><code>ANY</code>需要和单行比较操作符一起使用，和子查询返回的某一个值比较； </li>
<li><code>ALL</code>：需要和单行比较符一起使用，和子查询返回的所有值比较； </li>
<li><code>SOME</code>：实际上是<code>ANY</code>的别名，作用相同，一般使用<code>ANY</code>。</li>
</ul>
<p>多行子查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- IN</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> start_date <span class="keyword">IN</span> (<span class="keyword">SELECT</span> start_date <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> superior_emp_id <span class="operator">=</span> <span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+--------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname  <span class="operator">|</span> lname  <span class="operator">|</span> start_date <span class="operator">|</span> end_date <span class="operator">|</span> superior_emp_id <span class="operator">|</span> dept_id <span class="operator">|</span> title          <span class="operator">|</span> assigned_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+--------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Susan  <span class="operator">|</span> Barker <span class="operator">|</span> <span class="number">2002</span><span class="number">-09</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> Vice President <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Robert <span class="operator">|</span> Tyler  <span class="operator">|</span> <span class="number">2000</span><span class="number">-02</span><span class="number">-09</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> Treasurer      <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+--------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ANY，大于任一一个，也就是大于最小的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> start_date <span class="operator">&gt;</span> <span class="keyword">ANY</span> (<span class="keyword">SELECT</span> start_date <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> superior_emp_id <span class="operator">=</span> <span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+-----------+------------+----------+-----------------+---------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname    <span class="operator">|</span> lname     <span class="operator">|</span> start_date <span class="operator">|</span> end_date <span class="operator">|</span> superior_emp_id <span class="operator">|</span> dept_id <span class="operator">|</span> title              <span class="operator">|</span> assigned_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+-----------+------------+----------+-----------------+---------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Michael  <span class="operator">|</span> Smith     <span class="operator">|</span> <span class="number">2001</span><span class="number">-06</span><span class="number">-22</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>            <span class="keyword">NULL</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> President          <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Susan    <span class="operator">|</span> Barker    <span class="operator">|</span> <span class="number">2002</span><span class="number">-09</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> Vice President     <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Susan    <span class="operator">|</span> Hawthorne <span class="operator">|</span> <span class="number">2002</span><span class="number">-04</span><span class="number">-24</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">3</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Operations Manager <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> John     <span class="operator">|</span> Gooding   <span class="operator">|</span> <span class="number">2003</span><span class="number">-11</span><span class="number">-14</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span> Loan Manager       <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Helen    <span class="operator">|</span> Fleming   <span class="operator">|</span> <span class="number">2004</span><span class="number">-03</span><span class="number">-17</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller        <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Chris    <span class="operator">|</span> Tucker    <span class="operator">|</span> <span class="number">2004</span><span class="number">-09</span><span class="number">-15</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Sarah    <span class="operator">|</span> Parker    <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-02</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Jane     <span class="operator">|</span> Grossman  <span class="operator">|</span> <span class="number">2002</span><span class="number">-05</span><span class="number">-03</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Paula    <span class="operator">|</span> Roberts   <span class="operator">|</span> <span class="number">2002</span><span class="number">-07</span><span class="number">-27</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller        <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Thomas   <span class="operator">|</span> Ziegler   <span class="operator">|</span> <span class="number">2000</span><span class="number">-10</span><span class="number">-23</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Samantha <span class="operator">|</span> Jameson   <span class="operator">|</span> <span class="number">2003</span><span class="number">-01</span><span class="number">-08</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> John     <span class="operator">|</span> Blake     <span class="operator">|</span> <span class="number">2000</span><span class="number">-05</span><span class="number">-11</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller        <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Cindy    <span class="operator">|</span> Mason     <span class="operator">|</span> <span class="number">2002</span><span class="number">-08</span><span class="number">-09</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Frank    <span class="operator">|</span> Portman   <span class="operator">|</span> <span class="number">2003</span><span class="number">-04</span><span class="number">-01</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Theresa  <span class="operator">|</span> Markham   <span class="operator">|</span> <span class="number">2001</span><span class="number">-03</span><span class="number">-15</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller        <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Beth     <span class="operator">|</span> Fowler    <span class="operator">|</span> <span class="number">2002</span><span class="number">-06</span><span class="number">-29</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman    <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman    <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span> Teller             <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+-----------+------------+----------+-----------------+---------+--------------------+--------------------+</span></span><br><span class="line"><span class="number">18</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ALL，大于所有，也就是大于最大的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> start_date <span class="operator">&gt;</span> <span class="keyword">ALL</span> (<span class="keyword">SELECT</span> start_date <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> superior_emp_id <span class="operator">=</span> <span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+--------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname    <span class="operator">|</span> lname   <span class="operator">|</span> start_date <span class="operator">|</span> end_date <span class="operator">|</span> superior_emp_id <span class="operator">|</span> dept_id <span class="operator">|</span> title        <span class="operator">|</span> assigned_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+--------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> John     <span class="operator">|</span> Gooding <span class="operator">|</span> <span class="number">2003</span><span class="number">-11</span><span class="number">-14</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span> Loan Manager <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Helen    <span class="operator">|</span> Fleming <span class="operator">|</span> <span class="number">2004</span><span class="number">-03</span><span class="number">-17</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller  <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Chris    <span class="operator">|</span> Tucker  <span class="operator">|</span> <span class="number">2004</span><span class="number">-09</span><span class="number">-15</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller       <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Sarah    <span class="operator">|</span> Parker  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-02</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller       <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Samantha <span class="operator">|</span> Jameson <span class="operator">|</span> <span class="number">2003</span><span class="number">-01</span><span class="number">-08</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller       <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Frank    <span class="operator">|</span> Portman <span class="operator">|</span> <span class="number">2003</span><span class="number">-04</span><span class="number">-01</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller       <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller       <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman  <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span> Teller       <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+---------+------------+----------+-----------------+---------+--------------+--------------------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>多行子查询结果中如果包含<code>NULL</code>，需要注意联合使用 <code>NOT IN</code>时</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 多行子查询结果中含有null</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> emp_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> superior_emp_id <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> assigned_branch_id <span class="operator">=</span> <span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------+------------+----------+-----------------+---------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname   <span class="operator">|</span> lname     <span class="operator">|</span> start_date <span class="operator">|</span> end_date <span class="operator">|</span> superior_emp_id <span class="operator">|</span> dept_id <span class="operator">|</span> title              <span class="operator">|</span> assigned_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------+------------+----------+-----------------+---------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Michael <span class="operator">|</span> Smith     <span class="operator">|</span> <span class="number">2001</span><span class="number">-06</span><span class="number">-22</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>            <span class="keyword">NULL</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> President          <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Robert  <span class="operator">|</span> Tyler     <span class="operator">|</span> <span class="number">2000</span><span class="number">-02</span><span class="number">-09</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> Treasurer          <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Susan   <span class="operator">|</span> Hawthorne <span class="operator">|</span> <span class="number">2002</span><span class="number">-04</span><span class="number">-24</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">3</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Operations Manager <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Helen   <span class="operator">|</span> Fleming   <span class="operator">|</span> <span class="number">2004</span><span class="number">-03</span><span class="number">-17</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller        <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------+------------+----------+-----------------+---------+--------------------+--------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 含有 NULL，NOT IN NULL 查询结果为空</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> emp_id <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> superior_emp_id <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> assigned_branch_id <span class="operator">=</span> <span class="number">1</span>);</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> emp_id <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> superior_emp_id <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> assigned_branch_id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">AND</span> superior_emp_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+----------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname    <span class="operator">|</span> lname    <span class="operator">|</span> start_date <span class="operator">|</span> end_date <span class="operator">|</span> superior_emp_id <span class="operator">|</span> dept_id <span class="operator">|</span> title          <span class="operator">|</span> assigned_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+----------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Susan    <span class="operator">|</span> Barker   <span class="operator">|</span> <span class="number">2002</span><span class="number">-09</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> Vice President <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> John     <span class="operator">|</span> Gooding  <span class="operator">|</span> <span class="number">2003</span><span class="number">-11</span><span class="number">-14</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span> Loan Manager   <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Chris    <span class="operator">|</span> Tucker   <span class="operator">|</span> <span class="number">2004</span><span class="number">-09</span><span class="number">-15</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Sarah    <span class="operator">|</span> Parker   <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-02</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Jane     <span class="operator">|</span> Grossman <span class="operator">|</span> <span class="number">2002</span><span class="number">-05</span><span class="number">-03</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Paula    <span class="operator">|</span> Roberts  <span class="operator">|</span> <span class="number">2002</span><span class="number">-07</span><span class="number">-27</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller    <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Thomas   <span class="operator">|</span> Ziegler  <span class="operator">|</span> <span class="number">2000</span><span class="number">-10</span><span class="number">-23</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Samantha <span class="operator">|</span> Jameson  <span class="operator">|</span> <span class="number">2003</span><span class="number">-01</span><span class="number">-08</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> John     <span class="operator">|</span> Blake    <span class="operator">|</span> <span class="number">2000</span><span class="number">-05</span><span class="number">-11</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller    <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Cindy    <span class="operator">|</span> Mason    <span class="operator">|</span> <span class="number">2002</span><span class="number">-08</span><span class="number">-09</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Frank    <span class="operator">|</span> Portman  <span class="operator">|</span> <span class="number">2003</span><span class="number">-04</span><span class="number">-01</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Theresa  <span class="operator">|</span> Markham  <span class="operator">|</span> <span class="number">2001</span><span class="number">-03</span><span class="number">-15</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Head Teller    <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Beth     <span class="operator">|</span> Fowler   <span class="operator">|</span> <span class="number">2002</span><span class="number">-06</span><span class="number">-29</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman   <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> Rick     <span class="operator">|</span> Tulman   <span class="operator">|</span> <span class="number">2002</span><span class="number">-12</span><span class="number">-12</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span> Teller         <span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+----------+------------+----------+-----------------+---------+----------------+--------------------+</span></span><br><span class="line"><span class="number">15</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="相关子查询"><a href="#相关子查询" class="headerlink" title="相关子查询"></a>相关子查询</h3><p>子查询的执行依赖于外部查询，通常情况下是因为子查询中的表用到了外部的表，并进行了条件关联，因此每执行一次主查询，子查询都要重新计算一次，这样的自查阿勋就称之为<strong>关键子查询</strong>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询 avail_balance 大于 同open_branch_id平均 avail_balance 的信息</span></span><br><span class="line"><span class="comment">-- 方式1 </span></span><br><span class="line"><span class="keyword">SELECT</span> account_id,avail_balance,product_cd,open_branch_id <span class="keyword">FROM</span> account `a1` <span class="keyword">WHERE</span> a1.avail_balance <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(avail_balance) <span class="keyword">FROM</span> account `a2` <span class="keyword">WHERE</span> open_branch_id <span class="operator">=</span> a1.open_branch_id);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+---------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> account_id <span class="operator">|</span> avail_balance <span class="operator">|</span> product_cd <span class="operator">|</span> open_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+---------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">12</span> <span class="operator">|</span>       <span class="number">5487.09</span> <span class="operator">|</span> MM         <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">15</span> <span class="operator">|</span>      <span class="number">10000.00</span> <span class="operator">|</span> CD         <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">17</span> <span class="operator">|</span>       <span class="number">5000.00</span> <span class="operator">|</span> CD         <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">22</span> <span class="operator">|</span>       <span class="number">9345.55</span> <span class="operator">|</span> MM         <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">24</span> <span class="operator">|</span>      <span class="number">23575.12</span> <span class="operator">|</span> CHK        <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">27</span> <span class="operator">|</span>       <span class="number">9345.55</span> <span class="operator">|</span> BUS        <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">28</span> <span class="operator">|</span>      <span class="number">38552.05</span> <span class="operator">|</span> CHK        <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">29</span> <span class="operator">|</span>      <span class="number">50000.00</span> <span class="operator">|</span> SBL        <span class="operator">|</span>              <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+---------------+------------+----------------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2，通过 FROM 的方式，先查询出一张表，然后通过表关联查询</span></span><br><span class="line"><span class="keyword">SELECT</span> a.account_id,a.avail_balance,a.product_cd,a.open_branch_id <span class="keyword">FROM</span> account a,(<span class="keyword">SELECT</span> open_branch_id,<span class="built_in">AVG</span>(avail_balance) avg_avail_balance <span class="keyword">FROM</span> account <span class="keyword">GROUP</span> <span class="keyword">BY</span> open_branch_id) avg_open_branch_id <span class="keyword">WHERE</span> a.open_branch_id <span class="operator">=</span> avg_open_branch_id.open_branch_id <span class="keyword">AND</span> a.avail_balance <span class="operator">&gt;</span> avg_open_branch_id.avg_avail_balance;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+---------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> account_id <span class="operator">|</span> avail_balance <span class="operator">|</span> product_cd <span class="operator">|</span> open_branch_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+---------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">12</span> <span class="operator">|</span>       <span class="number">5487.09</span> <span class="operator">|</span> MM         <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">15</span> <span class="operator">|</span>      <span class="number">10000.00</span> <span class="operator">|</span> CD         <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">17</span> <span class="operator">|</span>       <span class="number">5000.00</span> <span class="operator">|</span> CD         <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">22</span> <span class="operator">|</span>       <span class="number">9345.55</span> <span class="operator">|</span> MM         <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">24</span> <span class="operator">|</span>      <span class="number">23575.12</span> <span class="operator">|</span> CHK        <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">27</span> <span class="operator">|</span>       <span class="number">9345.55</span> <span class="operator">|</span> BUS        <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">28</span> <span class="operator">|</span>      <span class="number">38552.05</span> <span class="operator">|</span> CHK        <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">29</span> <span class="operator">|</span>      <span class="number">50000.00</span> <span class="operator">|</span> SBL        <span class="operator">|</span>              <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+---------------+------------+----------------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在order by中使用子查询</span></span><br><span class="line"><span class="comment">-- 查询 emp_id,dept_id 通过 department name排序</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id,dept_id <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> (<span class="keyword">SELECT</span> `name` <span class="keyword">FROM</span> department d <span class="keyword">WHERE</span> e.dept_id <span class="operator">=</span> d.dept_id);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> dept_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+</span></span><br><span class="line"><span class="number">19</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>子查询可以使用的位置：除了 <code>GROUP BY</code> 和 <code>LIMIT</code> 之外，其他位置可以声明子查询。</p>
<h3 id="EXISTS-和-NOT-EXISTS"><a href="#EXISTS-和-NOT-EXISTS" class="headerlink" title="EXISTS 和 NOT EXISTS"></a>EXISTS 和 NOT EXISTS</h3><p>关联查询通常会和<code>EXISTS</code>操作符一起使用，用来检查子查询中是否存在满足条件的行。</p>
<ul>
<li>如果子查询中不存在满足条件的行：<ul>
<li>条件返回<code>FALSE</code></li>
<li>继续在子查询中查找</li>
</ul>
</li>
<li>如果子查询中存在满足条件的行：<ul>
<li>不在子查询中继续查找</li>
<li>条件返回<code>TRUE</code></li>
</ul>
</li>
<li><code>NOT EXISTS</code> 关键字表示，如果不存在某种条件，则返回TRUE，否则返回FALSE</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 获取管理者的 emp_id,fname,,superior_emp_id</span></span><br><span class="line"><span class="comment">-- 方式1，使用关联查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> e2.emp_id,e2.fname,e2.superior_emp_id <span class="keyword">FROM</span> employee e1 <span class="keyword">JOIN</span> employee e2 <span class="keyword">ON</span> e1.superior_emp_id <span class="operator">=</span> e2.emp_id ;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname   <span class="operator">|</span> superior_emp_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Michael <span class="operator">|</span>            <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Robert  <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Susan   <span class="operator">|</span>               <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Helen   <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Paula   <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> John    <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Theresa <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2，使用子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.emp_id,e1.fname,e1.superior_emp_id <span class="keyword">FROM</span> employee e1 <span class="keyword">WHERE</span> e1.emp_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> superior_emp_id <span class="keyword">FROM</span> employee e2);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname   <span class="operator">|</span> superior_emp_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Michael <span class="operator">|</span>            <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Robert  <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Susan   <span class="operator">|</span>               <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Helen   <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Paula   <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> John    <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Theresa <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式3，使用EXIST，将e1中的结果放到子查询中，如果满足，则返回TRUE，如果不满足，则使用e1中的下一条</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.emp_id,e1.fname,e1.superior_emp_id <span class="keyword">FROM</span> employee e1 <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee e2 <span class="keyword">WHERE</span> e1.emp_id <span class="operator">=</span> e2.superior_emp_id);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname   <span class="operator">|</span> superior_emp_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span> Michael <span class="operator">|</span>            <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> Robert  <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> Susan   <span class="operator">|</span>               <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span> Helen   <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> Paula   <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> John    <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">16</span> <span class="operator">|</span> Theresa <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-----------------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用NOT EXISTS,表示不存在某种条件，也就是查询非管理者</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.emp_id,e1.fname,e1.superior_emp_id <span class="keyword">FROM</span> employee e1 <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee e2 <span class="keyword">WHERE</span> e1.emp_id <span class="operator">=</span> e2.superior_emp_id);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> emp_id <span class="operator">|</span> fname    <span class="operator">|</span> superior_emp_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+-----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> Susan    <span class="operator">|</span>               <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> John     <span class="operator">|</span>               <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">7</span> <span class="operator">|</span> Chris    <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> Sarah    <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">9</span> <span class="operator">|</span> Jane     <span class="operator">|</span>               <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> Thomas   <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">12</span> <span class="operator">|</span> Samantha <span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> Cindy    <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> Frank    <span class="operator">|</span>              <span class="number">13</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">17</span> <span class="operator">|</span> Beth     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">18</span> <span class="operator">|</span> Rick     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">19</span> <span class="operator">|</span> Rick     <span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+-----------------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="创建和管理表"><a href="#创建和管理表" class="headerlink" title="创建和管理表"></a>创建和管理表</h2><p>数据存储过程总共有4步，分别是<strong>创建数据库</strong>、<strong>确认字段</strong>、<strong>创建数据表</strong>、<strong>插入数据</strong>。</p>
<p>数据库名称、表名称只能由数字、字母、下划线组成。</p>
<p>数据库名、表名、字段名等对象名中不要包含空格。</p>
<p>数据库不能重名，同一个数据库中表不能重名，同一个表中字段不能重名。</p>
<p>保持字段名和类型的一致性：当一个字段出现在多个表中，需要保持该字段在多张表中的数据类型一致。</p>
<h3 id="创建和管理数据库"><a href="#创建和管理数据库" class="headerlink" title="创建和管理数据库"></a>创建和管理数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库 </span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE mitaka1;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建数据库并且指定字符集和比较集,bin 区分大小写  ci不区分大小写 utf8mb4_0900_ai_bin</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE mitaka2 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 当数据库不存在时创建数据库， * 推荐使用这种方式</span></span><br><span class="line"><span class="comment">-- 如果数据库已经存在，则创建不成功，但是不会报错。如果数据库不存在，则创建成功。</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> mitaka1;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected, <span class="number">1</span> warning (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> mitaka3 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看数据库</span></span><br><span class="line"><span class="keyword">SHOW</span> databases;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> Database           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> employees          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> information_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mitaka             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mitaka1            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mitaka2            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mitaka3            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mytest             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> performance_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sys                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 获取创建数据库默认配置</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE mitaka1;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> Database <span class="operator">|</span> <span class="keyword">Create</span> Database                                                                                                                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> mitaka1  <span class="operator">|</span> <span class="keyword">CREATE</span> DATABASE `mitaka1` <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */</span> <span class="comment">/*!80016 DEFAULT ENCRYPTION=&#x27;N&#x27; */</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 切换数据库</span></span><br><span class="line">USE mitaka;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看当下数据库中的表</span></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"><span class="comment">-- 查看当前使用的数据库</span></span><br><span class="line"><span class="keyword">SELECT</span> DATABASE() <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> DATABASE() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> mitaka     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看指定数据库下的表</span></span><br><span class="line"><span class="keyword">SHOW</span> TABLES <span class="keyword">FROM</span> mitaka;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改数据库，如果不加上数据库，则会修改所有数据库</span></span><br><span class="line"><span class="comment">-- 修改数据库字符集</span></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE mitaka2 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected, <span class="number">1</span> warning (<span class="number">0.02</span> sec)</span><br><span class="line"><span class="comment">-- 数据库名称不能修改，只能创建新的库，然后将表复制到新的库中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除数据库</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE mitaka1;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 或者使用是否存在判断</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> mitaka2;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>数据类型也就是表中的字段类型：</p>
<p>数字：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>整数</td>
<td>TINYINT, SMALLINT, MEDIUMINT, <strong>INT或者INTEGER</strong>, BIGINT</td>
</tr>
<tr>
<td>浮点</td>
<td>FLOAT, DOUBLE</td>
</tr>
<tr>
<td>定点数类型</td>
<td><strong>DECIMAL</strong></td>
</tr>
<tr>
<td>位类型</td>
<td>BIT</td>
</tr>
</tbody></table>
<p>日期时间：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>日期时间</td>
<td>YEAR, TIME, <strong>DATE</strong>, DATETIME, TIMESTAMP</td>
</tr>
</tbody></table>
<p>字符串：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>文本</td>
<td><strong>CHAR</strong>, <strong>VARCHAR</strong>, TINYEXT, TEXT, MEDIUMTEXT, LONGTEXT</td>
</tr>
<tr>
<td>枚举类型</td>
<td>ENUM</td>
</tr>
<tr>
<td>集合类型</td>
<td>SET</td>
</tr>
<tr>
<td>二进制字符串类型</td>
<td>BINARY, VARBINARY, TINYBLOB, BLOB, MEDIUMBLOB, LONGBLOB</td>
</tr>
<tr>
<td>JSON类型</td>
<td>JSON对象，JSON数组</td>
</tr>
</tbody></table>
<p>空间数据类型</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>空间数据类型</td>
<td>单值：GEOMETRY, POINT, LINESTRING, POLYGON<br />多值：MULTIPOINT, MULTILINESTRING, MULTIPOLYGON, GEOMETRYCOLLECTION</td>
</tr>
</tbody></table>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> mytable1 (</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line"><span class="comment">-- 可变字符串，长度以15个字符保存，也就是长度不超过15个字符</span></span><br><span class="line">name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">hire_date <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">1</span> warning (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表创建的信息，如果没有使用字符集，则使用数据库的字符集</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable1;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span>    <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                                                                                                                                                                                                                                                  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> mytable1 <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `mytable1` (</span><br><span class="line">  `user_id` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> (_utf8mb4<span class="string">&#x27;aaa&#x27;</span>),</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `hire_date` <span class="type">date</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_0900_ai_ci <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表信息</span></span><br><span class="line"><span class="keyword">DESC</span> mytable1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+------+-----+-----------------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> Field     <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span>         <span class="operator">|</span> Extra             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+------+-----+-----------------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> user_id   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>            <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> id        <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>            <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name      <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">30</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> _utf8mb4<span class="string">&#x27;aaa&#x27;</span> <span class="operator">|</span> DEFAULT_GENERATED <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> email     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>            <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> hire_date <span class="operator">|</span> <span class="type">date</span>        <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>            <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+------+-----+-----------------+-------------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 基于现有的表创建新的表，而且会拷贝现有表中的数据</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> mytable2 <span class="keyword">AS</span> <span class="keyword">SELECT</span> id,name,hire_date <span class="keyword">FROM</span> mytable1;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 也可以使用多表关联，创建新的表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> mytable3 <span class="keyword">AS</span> <span class="keyword">SELECT</span> e1.id new_id,e2.id old_id <span class="keyword">FROM</span> mytable1 e1 <span class="keyword">JOIN</span> mytable2 e2 <span class="keyword">ON</span> e1.id <span class="operator">=</span> e2.id;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">1</span> warning (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 增加一行，默认添加到表的最后一行</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable1 <span class="keyword">ADD</span> salary <span class="keyword">DOUBLE</span>(<span class="number">10</span>,<span class="number">2</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">1</span> warning (<span class="number">0.03</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将字段放在最前面</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable1 <span class="keyword">ADD</span> user_id2 <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">FIRST</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将字段放在某个字段后面</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable1 <span class="keyword">ADD</span> email2 <span class="type">VARCHAR</span>(<span class="number">20</span>) AFTER name;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.06</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一般不会修改类型，例如将DOUBLE改成VARCHAR</span></span><br><span class="line"><span class="comment">-- 修改数据长度以及默认值</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable1 MODIFY name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span>(<span class="string">&#x27;aaa&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重命名一个字段以及长度</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable1 CHANGE salary monthly_salary <span class="keyword">DOUBLE</span>(<span class="number">100</span>,<span class="number">2</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">1</span> warning (<span class="number">0.03</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除一个字段</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable1 <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> monthly_salary;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>重命名表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 重命名表</span></span><br><span class="line">RENAME <span class="keyword">TABLE</span> mytable1 <span class="keyword">TO</span> my_other_table1;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> my_other_table1 RENAME <span class="keyword">TO</span> mytable1;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br></pre></td></tr></table></figure>

<p>删除表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除表，将表结构和数据都删掉，释放表空间</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> mytable2;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> mytable3;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>

<p>清空表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 清空表，保留表的结构，清除表中的数据</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> mytable1;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.06</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> mytable1;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="清空表数据的两种方式对比"><a href="#清空表数据的两种方式对比" class="headerlink" title="清空表数据的两种方式对比"></a>清空表数据的两种方式对比</h4><p><code>COMMIT</code>：提交数据，一旦执行，则数据就永久保存在数据库中，意味着数据不可以回滚。</p>
<p><code>ROLLBACK</code>：回滚数据，一旦执行，则可以实现数据的回滚，回滚到数据最近的一次<code>COMMIT</code>之后。</p>
<p>对于 <code>TRUNCATE TABLE</code> 和 <code>DELETE FROM</code></p>
<p>相同点：都可以实现对表中所有数据清除，保留表结构</p>
<p>不同点：</p>
<ul>
<li><code>TRUNCATE TABLE</code>：一旦执行此操作，表中数据全部清除，同时，数据时不可以回滚的</li>
<li><code>DELETE FROM</code>：一旦执行此操作，表中数据可以全部清除（不带WHERE的条件），同时，数据是可以回滚的。</li>
</ul>
<p>DDL 和 DML </p>
<ul>
<li>DDL：一旦执行，就不可回滚</li>
<li>DML：默认情况下，一旦执行，不可回滚。但是，如果在执行DML之前，执行 <code>SET AUTOCOMMIT = FALSE</code>，则执行的DML操作就可以实现回滚。</li>
</ul>
<p>通过<code>DML</code>的 <code>DELETE FROM</code>清空表 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 先执行commit，记录回滚点</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 查看数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mytable2;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> name   <span class="operator">|</span> hire_date  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> mitaka <span class="operator">|</span> <span class="number">2022</span><span class="number">-11</span><span class="number">-30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置 autocommit</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="literal">FALSE</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 通过DML删除</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> mytable2;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 再次查看数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mytable2;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回滚</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 再次查看数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mytable2;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> name   <span class="operator">|</span> hire_date  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> mitaka <span class="operator">|</span> <span class="number">2022</span><span class="number">-11</span><span class="number">-30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>通过<code>DDL</code>的 <code>TRUNCATE mytable2;</code>清空表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 先执行commit，记录回滚点</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mytable2;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> name   <span class="operator">|</span> hire_date  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> mitaka <span class="operator">|</span> <span class="number">2022</span><span class="number">-11</span><span class="number">-30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置 autocommit</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="literal">FALSE</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 通过DDL清空表</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> mytable2;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 再次查看数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mytable2;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回滚</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 再次查看数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mytable2;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>这是由于操作<code>DDL</code>之后，一定会执行<code>COMMIT</code>，这个<code>COMMIT</code>不受<code>autocommit</code>影响。</p>
<blockquote>
<p>阿里开发规范：</p>
<p><code>truncate table</code>比<code>delete</code>速度快，且占用系统和事务日志资源少，但<code>truncate</code>无事务且不触发<code>trigger</code>，有可能造成事故，故不建议在开发代码中使用词句。</p>
<p>说明：<code>truncate table</code>在功能上与不带<code>where</code>子句的<code>delete</code>语句相同。</p>
</blockquote>
<p>在MySQL 8.0中，支持DDL事务性</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE mytest;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">USE mytest;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> boo1(id <span class="type">int</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 不存在boo2，因此以下命令执行报错</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> boo1,boo2;</span><br><span class="line">ERROR <span class="number">1051</span> (<span class="number">42</span>S02): <span class="literal">Unknown</span> <span class="keyword">table</span> <span class="string">&#x27;mytest.boo2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 报错之后，boo1并没有被删掉</span></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_mytest <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span> boo1             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"><span class="comment">-- 在MySQL 5中，会出现的情况是即使删除表报错，boo1表也会被删掉</span></span><br></pre></td></tr></table></figure>

<h2 id="增删改"><a href="#增删改" class="headerlink" title="增删改"></a>增删改</h2><h3 id="增加数据"><a href="#增加数据" class="headerlink" title="增加数据"></a>增加数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看表字段</span></span><br><span class="line"><span class="keyword">DESC</span> employee_sub;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field      <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id         <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> fname      <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> lname      <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> start_date <span class="operator">|</span> <span class="type">date</span>        <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee_sub;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------------+-----------+------------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> fname       <span class="operator">|</span> lname     <span class="operator">|</span> start_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------------+-----------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> mitaka      <span class="operator">|</span> c         <span class="operator">|</span> <span class="number">2022</span><span class="number">-01</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line">...</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------------+-----------+------------+</span></span><br><span class="line"><span class="number">23</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>一条一条添加数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入数据，按照声明字段顺序依次添加数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee_sub <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;mitaka&#x27;</span>,<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;2022-10-10&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 或者通过字段指定，需要注意，如果没有指明字段非空，没声明的字段为null，可以写入，如果指明非空，则会报错</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee_sub(id,start_date,fname,lname) <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;2022-10-10&#x27;</span>,<span class="string">&#x27;xiaoyeshiyu&#x27;</span>,<span class="string">&#x27;lname&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 或者批量插入，相比insert一条一条插，这个方式效率更高</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee_sub <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;2022-10-10&#x27;</span>),(<span class="number">4</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;2022-10-10&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">2</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">2</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>批量插入，也就是将查询结果插入进去</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 将查询的结果插入到表中，查询的字段，一定要与添加到的表的字段一一对应。另外，需要注意，如果搜索到的字段大于定义字段的长度，会报错</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee_sub <span class="keyword">SELECT</span> emp_id,fname,lname,start_date <span class="keyword">FROM</span> employee;</span><br><span class="line">Query OK, <span class="number">19</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line">Records: <span class="number">19</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>关键字 <code>VALUES</code>也可以是 <code>VALUE</code>，不过 <code>VALUES</code>是规范</li>
<li>字符串、时间类型，需要使用单引号 <code>&#39;&#39;</code></li>
</ul>
<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- UPDATE xxx SET xxx WHERE xxx</span></span><br><span class="line"><span class="comment">-- 通常跟 WHERE 一起使用，否则会将所有的数据都修改掉</span></span><br><span class="line"><span class="keyword">UPDATE</span> employee_sub <span class="keyword">SET</span> start_date <span class="operator">=</span> <span class="string">&#x27;2022-10-11&#x27;</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">Query OK, <span class="number">3</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">4</span>  Changed: <span class="number">3</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 同时修改多个字段</span></span><br><span class="line"><span class="keyword">UPDATE</span> employee_sub <span class="keyword">SET</span> start_date <span class="operator">=</span> <span class="string">&#x27;2022-01-01&#x27;</span>,lname <span class="operator">=</span> <span class="string">&#x27;c&#x27;</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">Query OK, <span class="number">4</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">4</span>  Changed: <span class="number">4</span>  Warnings: <span class="number">0</span></span><br><span class="line"><span class="comment">-- 修改数据，如果存在约束，则可能导致修改不成功。</span></span><br></pre></td></tr></table></figure>

<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除数据</span></span><br><span class="line"><span class="comment">-- DELETE FROM xxx FROM xxx </span></span><br><span class="line"><span class="comment">-- 如果没有条件，则删除所有</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employee_sub <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">Query OK, <span class="number">4</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 删除数据，如果存在约束，则可能导致删除不成功。</span></span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>DML操作，默认情况下，执行完之后，就会自动提交数据。</p>
<p>如果希望执行完以后，不自动提交数据，则需要使用 <code>set autocommit = false</code> </p>
<h3 id="MySQL-8新特性：计算列"><a href="#MySQL-8新特性：计算列" class="headerlink" title="MySQL 8新特性：计算列"></a>MySQL 8新特性：计算列</h3><p>当a列是1，b列式2，c列不需要手动插入，插入a列和b列之后，定义a+b的结果为c列的值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表，c为计算列</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable3 (</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">a <span class="type">INT</span>,</span><br><span class="line">b <span class="type">INT</span>,</span><br><span class="line">c <span class="type">INT</span> GENERATED ALWAYS <span class="keyword">AS</span> (a <span class="operator">+</span> b) VIRTUAL</span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.06</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mytable3(a,b) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">100</span>,<span class="number">200</span>);</span><br><span class="line">Query OK, <span class="number">2</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line">Records: <span class="number">2</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mytable3;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="数据类型-1"><a href="#数据类型-1" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h3><p>MySQL 支持所有标准 SQL 数值数据类型。</p>
<p>这些类型包括严格数值数据类型(INTEGER、SMALLINT、DECIMAL 和 NUMERIC)，以及近似数值数据类型(FLOAT、REAL 和 DOUBLE PRECISION)。</p>
<p>关键字INT是INTEGER的同义词，关键字DEC是DECIMAL的同义词。</p>
<p>BIT数据类型保存位字段值，并且支持 MyISAM、MEMORY、InnoDB 和 BDB表。</p>
<p>作为 SQL 标准的扩展，MySQL 也支持整数类型 TINYINT、MEDIUMINT 和 BIGINT。下面的表显示了需要的每个整数类型的存储和范围。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小</th>
<th align="left">范围（有符号）</th>
<th align="left">范围（无符号）</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">TINYINT</td>
<td align="left">1 Bytes</td>
<td align="left">(-128，127)</td>
<td align="left">(0，255)</td>
<td align="left">小整数值</td>
</tr>
<tr>
<td align="left">SMALLINT</td>
<td align="left">2 Bytes</td>
<td align="left">(-32 768，32 767)</td>
<td align="left">(0，65 535)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td align="left">MEDIUMINT</td>
<td align="left">3 Bytes</td>
<td align="left">(-8 388 608，8 388 607)</td>
<td align="left">(0，16 777 215)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td align="left">INT或INTEGER</td>
<td align="left">4 Bytes</td>
<td align="left">(-2 147 483 648，2 147 483 647)</td>
<td align="left">(0，4 294 967 295)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td align="left">BIGINT</td>
<td align="left">8 Bytes</td>
<td align="left">(-9,223,372,036,854,775,808，9 223 372 036 854 775 807)</td>
<td align="left">(0，18 446 744 073 709 551 615)</td>
<td align="left">极大整数值</td>
</tr>
<tr>
<td align="left">FLOAT</td>
<td align="left">4 Bytes</td>
<td align="left">(-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38)</td>
<td align="left">0，(1.175 494 351 E-38，3.402 823 466 E+38)</td>
<td align="left">单精度 浮点数值</td>
</tr>
<tr>
<td align="left">DOUBLE</td>
<td align="left">8 Bytes</td>
<td align="left">(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td align="left">0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td align="left">双精度 浮点数值</td>
</tr>
<tr>
<td align="left">DECIMAL</td>
<td align="left">对DECIMAL(M,D) ，如果M&gt;D，为M+2，否则为D+2</td>
<td align="left">高精度小数，依赖于M和D的值，默认是(10,0)，M代表数字总长度，D代表小数点后数字长度。相比上面两个浮点数而言，DECIMAL更加精确，因此，在对浮点数有精度要求的情况下，应使用DECIMAL。</td>
<td align="left">依赖于M和D的值</td>
<td align="left">小数值</td>
</tr>
</tbody></table>
<p>INT(5)代表显示宽度（而不是长度），也就是支持5位数显示，需要与 ZEROFILL一起使用。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test_int2(</span><br><span class="line">f1 <span class="type">INT</span>(<span class="number">5</span>),</span><br><span class="line"><span class="comment">-- 1. 显示宽度为5，当insert值不足5位是，使用0填充</span></span><br><span class="line"><span class="comment">-- 2. 使用ZEROFILL时，自动加入unsigned属性</span></span><br><span class="line">f2 <span class="type">INT</span>(<span class="number">5</span>) ZEROFILL</span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">3</span> warnings (<span class="number">0.05</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_int2 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="number">1</span>),(<span class="number">123456</span>,<span class="number">123456</span>);</span><br><span class="line">Query OK, <span class="number">2</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line">Records: <span class="number">2</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test_int2;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span> f1     <span class="operator">|</span> f2     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span>  <span class="number">00001</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">123456</span> <span class="operator">|</span> <span class="number">123456</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h3><p>表示时间值的日期和时间类型为DATETIME、DATE、TIMESTAMP、TIME和YEAR。</p>
<p>每个时间类型有一个有效值范围和一个”零”值，当指定不合法的MySQL不能表示的值时使用”零”值。</p>
<p>TIMESTAMP类型有专有的自动更新特性，将在后面描述。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小 ( bytes)</th>
<th align="left">范围</th>
<th align="left">格式</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">DATE</td>
<td align="left">3</td>
<td align="left">1000-01-01&#x2F;9999-12-31</td>
<td align="left">YYYY-MM-DD</td>
<td align="left">日期值</td>
</tr>
<tr>
<td align="left">TIME</td>
<td align="left">3</td>
<td align="left">‘-838:59:59’&#x2F;‘838:59:59’（在表示时间间隔时，可以使用负数）</td>
<td align="left">HH:MM:SS</td>
<td align="left">时间值或持续时间</td>
</tr>
<tr>
<td align="left">YEAR</td>
<td align="left">1</td>
<td align="left">1901&#x2F;2155</td>
<td align="left">YYYY</td>
<td align="left">年份值</td>
</tr>
<tr>
<td align="left">DATETIME</td>
<td align="left">8</td>
<td align="left">‘1000-01-01 00:00:00’ 到 ‘9999-12-31 23:59:59’。可通过current_timestanp().now(),systime()函数生成。</td>
<td align="left">YYYY-MM-DD hh:mm:ss</td>
<td align="left">混合日期和时间值</td>
</tr>
<tr>
<td align="left">TIMESTAMP</td>
<td align="left">4</td>
<td align="left">‘1970-01-01 00:00:01’ UTC 到 ‘2038-01-19 03:14:07’ UTC结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038年1月19日 凌晨 03:14:07。可通过current_timestanp().now(),systime()函数生成。</td>
<td align="left">YYYY-MM-DD hh:mm:ss</td>
<td align="left">混合日期和时间值，时间戳</td>
</tr>
</tbody></table>
<p><code>DATETIME</code>和<code>TIMESTAMP</code>的区别：</p>
<ul>
<li><code>TIMESTAMP</code>存储空间小，因此表示的时间范围也比较小（在1970-2038之间）</li>
<li>底层存储方式不同，<code>TIMESTAMP</code>底层存储的是毫秒，距离<code>1970-01-01 00:00:00</code>的毫秒值</li>
<li>两个日期比较大小或者日期计算时，<code>TIMESTAMP</code>更方便更快</li>
<li><code>TIMESTAMP</code>与时区有关，<code>TIMESTAMP</code>会根据用户的时区不同，显示不同的结果，而DATETIME只能反应出插入时当地的时区，其他时区的人查看数据必然会有误差。</li>
</ul>
<p>实际项目中，尽量使用<code>DATETIME</code>类型，因为这个数据类型包括了完整的日期和时间信息，取值范围也最大，使用起来比较方便。</p>
<p>此外，一般存储注册时间、商品发布时间等，不建议使用<code>DATETIME</code>存储，而是使用<code>TIMESTAMP</code>，因为<code>DATETIME</code>虽然直观，但是不便于计算。</p>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p>字符串类型指CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、ENUM和SET。该节描述了这些类型如何工作以及如何在查询中使用这些类型。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CHAR</td>
<td align="left">0-255 bytes</td>
<td align="left">定长字符串，声明多少长度，存储时就占用多少空间。（1:1或1:3，根据字符集判断字节数），不写长度默认是1.</td>
</tr>
<tr>
<td align="left">VARCHAR</td>
<td align="left">0-65535 bytes</td>
<td align="left">变长字符串，必须定义长度，最长为21845，因为1个中文占用3个字节。</td>
</tr>
<tr>
<td align="left">TINYBLOB</td>
<td align="left">0-255 bytes</td>
<td align="left">不超过 255 个字符的二进制字符串</td>
</tr>
<tr>
<td align="left">TINYTEXT</td>
<td align="left">0-255 bytes</td>
<td align="left">短文本字符串</td>
</tr>
<tr>
<td align="left">BLOB</td>
<td align="left">0-65 535 bytes(64KB)</td>
<td align="left">二进制形式的长文本数据</td>
</tr>
<tr>
<td align="left">TEXT</td>
<td align="left">0-65 535 bytes</td>
<td align="left">长文本数据</td>
</tr>
<tr>
<td align="left">MEDIUMBLOB</td>
<td align="left">0-16 777 215 bytes(16M)</td>
<td align="left">二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td align="left">MEDIUMTEXT</td>
<td align="left">0-16 777 215 bytes</td>
<td align="left">中等长度文本数据</td>
</tr>
<tr>
<td align="left">LONGBLOB</td>
<td align="left">0-4 294 967 295 bytes(4G)</td>
<td align="left">二进制形式的极大文本数据</td>
</tr>
<tr>
<td align="left">LONGTEXT</td>
<td align="left">0-4 294 967 295 bytes</td>
<td align="left">极大文本数据</td>
</tr>
</tbody></table>
<p><strong>注意</strong>：<strong>char(n) 和 varchar(n) 中括号中 n 代表字符的个数，并不代表字节个数，比如 CHAR(30) 就可以存储 30 个字符。</strong></p>
<p>CHAR 和 VARCHAR 类型类似，但它们保存和检索的方式不同。它们的最大长度和是否尾部空格被保留等方面也不同（select concat(c1,’****’) from test_char 这个命令可以看到字符串在右侧填充）。在存储或检索过程中不进行大小写转换。</p>
<p>CHAR和VARCHAR的比较：</p>
<ul>
<li>CHAR(M)：固定长度，空间上浪费存储空间，时间上效率高，适用于存储不大，速度要求高的场景</li>
<li>VARCHAR(M)：可变长度，空间上节省存储空间，时间上效率低，使用与非CHAR的情况</li>
</ul>
<p>情况1：存储很短的信息，应该用char</p>
<p>情况2：固定商都，比如使用uuid，使用char更合适</p>
<p>情况3：很频繁的改变column，因为varchar每次存储都要有额外的计算，得到长度等工作，如果一个column频繁改变，使用char更好</p>
<p>情况4：根据存储引擎决定：</p>
<ul>
<li>MyISAM存储引擎和数据列：最好使用固定长度的数据列代替可变长度的数据列，使整个表竞态话，从而使数据检索更快，用空间换时间</li>
<li>MEMORY存储引擎和数据列：MEMORY数据表目前都是用固定长度的数据行存储，因此无论使用CHAR或VARCHAR都没有关系，都是作为CHAR处理</li>
<li>InnoDB存储引擎，建议使用VARCHAR类型。内部的行存储格式并没有区分固定长度和可变长度列（所有数据行都是用纸箱数据列值的头指针），而且<strong>主要影响性能的因素是数据行使用的存储总量</strong>，由于char平均占用的空间多余varchar，所以除了简短并且固定长度的，其他考虑varchar，这样节省空间，对磁盘I\O和数据存储总量比较好。</li>
</ul>
<p>BINARY 和 VARBINARY 类似于 CHAR 和 VARCHAR，不同的是它们包含二进制字符串而不要非二进制字符串。也就是说，它们包含字节字符串而不是字符字符串。这说明它们没有字符集，并且排序和比较基于列值字节的数值值。 </p>
<p>BLOB 是一个二进制大对象，可以容纳可变数量的数据。有 4 种 BLOB 类型：TINYBLOB、BLOB、MEDIUMBLOB 和 LONGBLOB。它们区别在于可容纳存储范围不同。</p>
<p>有 4 种 TEXT 类型：TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT。对应的这 4 种 BLOB 类型，可存储的最大长度不同，可根据实际情况选择。由于实际存储长度不确定，因此MySQL不允许TEXT类型的字段做主键。遇到这种情况，可以使用CHAR(M)或VARCHAR(M)。</p>
<p>text和blob类型的数据删除后容易导致“空洞”，使得文件碎片比较多，所以频繁使用的表不建议包含TEXT类型字段，建议单独分出去用一个独立的表。</p>
<h3 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h3><table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ENUM</td>
<td align="left">1个或2个字节，长度1&lt;&#x3D;L&lt;&#x3D;65535，当包含1<del>255个成员，需要1个字节存储空间，包含256</del>25535个成员，需要2个字节的存储空间，上限为65535个</td>
<td align="left">固定值类型进行枚举</td>
</tr>
<tr>
<td align="left">SET</td>
<td align="left">根据成员个数，1&lt;&#x3D;L&lt;&#x3D;8占用1个字节，以此类推，最多64个成员占用8个字节。</td>
<td align="left">选取多个枚举类型</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `b` (</span><br><span class="line">      `k` ENUM(<span class="string">&#x27;T&#x27;</span>,<span class="string">&#x27;F&#x27;</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `b` (`k`) <span class="keyword">VALUES</span> (<span class="string">&#x27;T&#x27;</span>), (<span class="string">&#x27;F&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">2</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line">Records: <span class="number">2</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> myset (col <span class="keyword">SET</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>));<span class="operator">/</span><span class="operator">/</span>新建表格</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> myset (col) <span class="keyword">VALUES</span> (<span class="string">&#x27;a,d&#x27;</span>), (<span class="string">&#x27;d,a&#x27;</span>), (<span class="string">&#x27;a,d,a&#x27;</span>), (<span class="string">&#x27;a,d,d&#x27;</span>), (<span class="string">&#x27;d,a,d&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">5</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line">Records: <span class="number">5</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="数据类型总结"><a href="#数据类型总结" class="headerlink" title="数据类型总结"></a>数据类型总结</h3><p>如果是整数，使用INT，如果是小数，使用DECIMAL(M,D)，如果是日期，使用DATETIME。</p>
<ul>
<li>任何字段如果是非负数，必须使用UNSIGENED</li>
<li>小数类型使用DECIMAL，禁止使用FLOAT和DOUBLE</li>
<li>字符串长度几乎相等，使用CHAR定长字符串类型</li>
<li>VARCHAR可变长字符串，不预先分配存储空间，长度不超过5000，如果长度大于此值定义字段类型为TEXT，独立出来一张表，用主键对应，避免影响其他字段索引效率</li>
</ul>
<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>数据完整性是指谁的精确性和可靠性，它是防止数据库中存在不符合语义规定的数据和防止因错误信息的输入输出造成无效操作或错误信息提出的。</p>
<p>SQL规范以约束的方式对表数据进行额外的条件限制：</p>
<ul>
<li>实体完整性 Entity Intrgrity：一个表中，不能存在两条完全相同无法区分的记录，可以使用主键约束</li>
<li>域完整性Domain Integrity：例如年龄范围0-120，性别范围”男&#x2F;女“</li>
<li>引用完整性Referential Integrity：例如员工所在部门，在部门表中要能找到这个部门</li>
<li>用户自定义完整性User-defined Integrity：例如用户名唯一、密码不能为空登，本部门经理的工资不得高于本部门职工的平均工资的5倍</li>
</ul>
<p>表级的强制规定就是约束。可以在创建表时规定约束（CREATE TABLE语句），也可以在修改表时增加约束(ALTER TABLE)，或者删除约束(ALTER TABLE)</p>
<p>约束分类：</p>
<ul>
<li>约束字段个数：单列约束和多列约束</li>
<li>声明约束的位置：列级约束和表级约束</li>
<li>约束的作用：非空not null、唯一性约束unique、主键约束primary key、外键约束foregin key外键约束、检查约束check、默认值约束default</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看表中约束</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> information_schema.table_constraints <span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;employees&#x27;</span>;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>MySQL关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>NULL</td>
<td>数据列可包含NULL值，默认下，都可以为null</td>
</tr>
<tr>
<td>NOT NULL</td>
<td>数据列不允许包含NULL值，只能单独列设置，不能组合非空</td>
</tr>
<tr>
<td>DEFAULT</td>
<td>默认值</td>
</tr>
<tr>
<td>PRIMARY KEY</td>
<td>主键</td>
</tr>
<tr>
<td>AUTO_INCREMENT</td>
<td>自动递增，适用于整数类型</td>
</tr>
<tr>
<td>UNSIGNED</td>
<td>无符号</td>
</tr>
<tr>
<td>CHARACTER SET name</td>
<td>指定一个字符集（给表中的某个字段指定字符集）</td>
</tr>
</tbody></table>
<h3 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 添加约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mitaka_test1 (</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mitaka_test1 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;xiaoyeshiyu&#x27;</span>,<span class="string">&#x27;xiaoyeshiyu0202@163.com&#x27;</span>,<span class="number">2400</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 没有默认值时，没有填写对应列，则为null</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mitaka_test1(id,email) <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;adb@163.com&#x27;</span>);</span><br><span class="line">&quot;ERROR 1364 (HY000): Field &#x27;last_name&#x27; doesn&#x27;t have a default value&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新也无法设置为null</span></span><br><span class="line"><span class="keyword">UPDATE</span> mitaka_test1 <span class="keyword">SET</span> last_name <span class="operator">=</span> <span class="keyword">NULL</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">ERROR <span class="number">1048</span> (<span class="number">23000</span>): <span class="keyword">Column</span> <span class="string">&#x27;last_name&#x27;</span> cannot be <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新约束，如果已经存在null值，则需要先改掉null值，然后才能添加约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mitaka_test1 MODIFY email <span class="type">VARCHAR</span>(<span class="number">25</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.06</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 去掉约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mitaka_test1 MODIFY email <span class="type">VARCHAR</span>(<span class="number">25</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.08</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="唯一性约束"><a href="#唯一性约束" class="headerlink" title="唯一性约束"></a>唯一性约束</h3><p>用来限制某个字段、列的值不能重复</p>
<ul>
<li>同一个表可以有多个唯一性约束</li>
<li>唯一性约束可以用在多个列上，组成一个复合约束</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test222(</span><br><span class="line"><span class="comment">-- 列级约束</span></span><br><span class="line">id <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">25</span>) <span class="keyword">UNIQUE</span>,</span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line"><span class="comment">-- 表级约束</span></span><br><span class="line"><span class="keyword">CONSTRAINT</span> <span class="keyword">UNIQUE</span>(email)</span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">1</span> warning (<span class="number">0.07</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建唯一性约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test2(</span><br><span class="line"><span class="comment">-- 列级约束</span></span><br><span class="line">id <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line"><span class="comment">-- 表级约束，名称是uk_test2_email，如果创建约束时不指定约束名称，则默认使用列名</span></span><br><span class="line"><span class="keyword">CONSTRAINT</span> uk_test2_email <span class="keyword">UNIQUE</span>(email)</span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">DESC</span> test2;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field     <span class="operator">|</span> Type          <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id        <span class="operator">|</span> <span class="type">int</span>           <span class="operator">|</span> YES  <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> last_name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">15</span>)   <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> email     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>)   <span class="operator">|</span> YES  <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary    <span class="operator">|</span> <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test2 <span class="keyword">SET</span> salary <span class="operator">=</span> <span class="number">3600</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">0</span>  Changed: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test2 <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;1@123.com&#x27;</span>,<span class="number">3400</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test2 <span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;1@123.com&#x27;</span>,<span class="number">3500</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;1@123.com&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;test2.uk_test2_email&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 可以向unique的字段添加null，而且可以多次添加null值</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test2 <span class="keyword">VALUES</span> (<span class="number">4</span>,<span class="string">&#x27;m&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">3400</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加约束的另外一种方式</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test2 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> uk_test2_salary <span class="keyword">UNIQUE</span>(salary);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;3400.00&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;test2.uk_test2_salary&#x27;</span></span><br><span class="line"><span class="comment">-- 修改salary之后</span></span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 复合约束，多列约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> user1 (</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">`name` <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">`password` <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line"><span class="comment">-- 表级约束</span></span><br><span class="line"><span class="keyword">CONSTRAINT</span> uk_user_name_pwd <span class="keyword">UNIQUE</span>(`name`,`password`)</span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> user1 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> user1 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> user1 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--  删除唯一性约束</span></span><br><span class="line"><span class="comment">-- 添加唯一性约束的列上会自动创建唯一索引</span></span><br><span class="line"><span class="comment">-- 删除唯一约束只能通过删除唯一索引的方式删除</span></span><br><span class="line"><span class="comment">-- 删除时需要指定唯一索引名，唯一索引名就是和唯一约束名一样</span></span><br><span class="line"><span class="comment">-- 如果唯一约束声明时没有指定名称，如果是单列，则是列名，如果是多列，则是第一列的名称</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> user1 <span class="keyword">DROP</span> INDEX uk_user_name_pwd;</span><br></pre></td></tr></table></figure>

<h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><p>用来唯一标识表中的一行记录。相当于唯一约束+非空约束的组合，主键约束不能重复也不能为NULL</p>
<ul>
<li>一个表最多只能有一个主键约束，建立主键约束可以在列级别创建，也可以在表级别创建</li>
<li>主键约束对应表中的一列或多列（复合主键）</li>
<li>如果是多列组合的复合主键约束，则所有列都不能为空，并且组合的值不允许重复</li>
<li>MySQL的主键名总是PRIMARY，就算命名了主键约束也没用</li>
<li>当创建主键约束时，系统会默认在所在的列或列组合上建立对应的主键索引，如果删除主键约束，主键约束对应的索引就自动删除</li>
<li>需要注意，不要修改主键字段的值，因为主键是数据记录的唯一标识，修改主键的值就有可能破坏数据完整性</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 主键约束</span></span><br><span class="line"><span class="comment">-- 声明</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line"><span class="comment">-- 会报错，最多只有一个主键约束,Multiple primary key defined</span></span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">25</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line"><span class="comment">-- 会报错，最多只有一个主键约束</span></span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">25</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> information_schema.table_constraints <span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;test3&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------------------+-----------------+--------------+------------+-----------------+----------+</span></span><br><span class="line"><span class="operator">|</span> CONSTRAINT_CATALOG <span class="operator">|</span> CONSTRAINT_SCHEMA <span class="operator">|</span> CONSTRAINT_NAME <span class="operator">|</span> TABLE_SCHEMA <span class="operator">|</span> TABLE_NAME <span class="operator">|</span> CONSTRAINT_TYPE <span class="operator">|</span> ENFORCED <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------------------+-----------------+--------------+------------+-----------------+----------+</span></span><br><span class="line"><span class="operator">|</span> def                <span class="operator">|</span> mysql             <span class="operator">|</span> <span class="keyword">PRIMARY</span>         <span class="operator">|</span> mysql        <span class="operator">|</span> test3      <span class="operator">|</span> <span class="keyword">PRIMARY</span> KEY     <span class="operator">|</span> YES      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------------------+-----------------+--------------+------------+-----------------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 声明主键约束的另外一种方式</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line"><span class="comment">-- 会报错，最多只有一个主键约束</span></span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line"><span class="comment">-- 就算声明，也会变成PRIMARY，因此，一般写成 PRIMARY KEY(id)</span></span><br><span class="line"><span class="keyword">CONSTRAINT</span> pk_test4_id <span class="keyword">PRIMARY</span> KEY(id)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 复合主键</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> user3(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">`name` <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">`password` <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY(`name`,`password`)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test6  <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(id);</span><br><span class="line"><span class="comment">-- 删除主键约束，在实际开发中，不会删除主键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test6 <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure>

<h3 id="自增列"><a href="#自增列" class="headerlink" title="自增列"></a>自增列</h3><p>某个字段的值自增，AUTO_INCREMENT。</p>
<ul>
<li>一个表中最多只能有一个自增长列</li>
<li>当需要产生唯一标识符或顺序值时，可设置自增长列</li>
<li>自增长列约束的列必须是键列（主键列、唯一键列）</li>
<li>自增长约束的列的数据必须是整数类型</li>
<li>如果自增长列制定了0和null，会在当前最大值的基础上自增；如果自增列手动指定了具体值，则赋值为具体值。</li>
<li>auto increment自增不一定从1开始例如在表中插入第一条记录同时指定id为5，此后插入的记录id就会从6开始网上增。添加主键约束时，往往需要设置字段自增属性。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test7(</span><br><span class="line"><span class="comment">-- 需要在主键上 Incorrect table definition; there can be only one auto column and it must be defined as a key</span></span><br><span class="line"><span class="comment">-- id INT auto_increment,</span></span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>) </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test7(last_name) <span class="keyword">VALUES</span>(<span class="string">&#x27;m&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test7;</span><br><span class="line"><span class="comment">-- 插入0 </span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test7 <span class="keyword">VALUES</span> (<span class="number">0</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="comment">-- 插入null</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test7 <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="comment">-- 插入不连续的值，如果不冲突，可以添加成功</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test7 <span class="keyword">VALUES</span> (<span class="number">8</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="comment">-- 开发中，一旦主键声明自增，在添加数据时，不会指定该值</span></span><br><span class="line"><span class="comment">-- 删除之后，再次添加数据，不会填充删掉的id</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> test7 <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="comment">-- 在MySQL5.7版本中，重启服务器之后，会再次填充id3，这是由于increment会在内存中维护自增值，重启之后从0开始。</span></span><br><span class="line"><span class="comment">-- 在MySQL8版本中，重启服务器之后，不会填充id3，aotu_increment的计数器会放到redo_log中，持久化。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加自增约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test8(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>) </span><br><span class="line">);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test8 MODIFY id <span class="type">INT</span> auto_increment;</span><br><span class="line"><span class="comment">-- 去掉自增约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test8 MODIFY id <span class="type">INT</span>;</span><br></pre></td></tr></table></figure>

<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><p>限制某个表的某个字段的引用完整性。FOREIGN KEY</p>
<p>例如员工表中的部门信息必须在部门表中存在。（员工表的部门id有外键约束，关联了部门表的主键id）</p>
<p>主表（父表）：被引用的表，被参考的表；上例子中的部门表</p>
<p>从表（子表）：引用别人的表，参考别人的表；上例子中的员工表</p>
<p>特点：</p>
<ul>
<li>从表的外键列，比如引用、参考主表的主键或唯一约束的列；这是由于参考的值必须唯一。</li>
<li>创建约束时，不命名，默认名不是列名，而是自动产生一个外键名</li>
<li>创建表时就指定外键约束的话，需要先创建主表，再创建从表</li>
<li>删除表时，需要先删除从表，再删除住表</li>
<li>当主表的记录被从表参照时，主表的记录不允许删除，如果要删除数据，需要先删除从表中依赖该记录的数据，然后才可以删除主表的数据</li>
<li>在从表中指定外键约束，并且一个表可以建立多个外键约束</li>
<li>从表的外键列与主表被参照列的名字可以不相同，但是数据类型必须一样，逻辑意义一致，如果类型不一样，创建子表时，会出现报错</li>
<li><strong>当创建外键约束时，系统默认会在所在的列上建立对应的普通索引</strong>。但是索引名是列名，不是外键的约束名。（根据外键查询效率很高）</li>
<li>删除外键约束后，必须<strong>手动删除</strong>对应的索引</li>
<li>外键约束不能跨引擎使用。MySQL支持多种存储引擎，主表和从表不能跨引擎。因此，存储引擎也不能随意选择。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在创建表时添加外键</span></span><br><span class="line"><span class="comment">-- 先创建主表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept1(</span><br><span class="line"><span class="comment">-- 没有添加主键约束或者唯一约束，创建从表时报错，Failed to add the foreign key constraint. Missing index for constraint &#x27;fk_emp1_dept_id&#x27; in the referenced table &#x27;dept1&#x27;</span></span><br><span class="line">dept_id <span class="type">INT</span>,</span><br><span class="line">dept_name <span class="type">VARCHAR</span>(<span class="number">15</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 创建从表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp1(</span><br><span class="line">emp_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">emp_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">department_id <span class="type">int</span>,</span><br><span class="line"><span class="comment">-- 表级约束</span></span><br><span class="line"><span class="keyword">CONSTRAINT</span> fk_emp1_dept_id <span class="keyword">FOREIGN</span> KEY(department_id) <span class="keyword">REFERENCES</span> dept1(dept_id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> dept1 <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(dept_id);</span><br><span class="line"><span class="keyword">DESC</span> emp1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据,Cannot add or update a child row: a foreign key constraint fails (`mitaka3`.`emp1`, CONSTRAINT `fk_emp1_dept_id` FOREIGN KEY (`department_id`) REFERENCES `dept1` (`dept_id`))</span></span><br><span class="line"><span class="comment">-- 主表没有id为1的数据，从表添加不成功</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp1 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;m&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">-- 先在主表中添加，再添加从表数据才会成功</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept1 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;sh&#x27;</span>);</span><br><span class="line"><span class="comment">-- 删除主表数据,Cannot delete or update a parent row: a foreign key constraint fails (`mitaka3`.`emp1`, CONSTRAINT `fk_emp1_dept_id` FOREIGN KEY (`department_id`) REFERENCES `dept1` (`dept_id`))</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> dept1 <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 更新主表数据的被参考数据，Cannot delete or update a parent row: a foreign key constraint fails (`mitaka3`.`emp1`, CONSTRAINT `fk_emp1_dept_id` FOREIGN KEY (`department_id`) REFERENCES `dept1` (`dept_id`))</span></span><br><span class="line"><span class="keyword">UPDATE</span> dept1 <span class="keyword">SET</span> dept_id <span class="operator">=</span> <span class="number">2</span> <span class="keyword">WHERE</span> dept_id <span class="operator">=</span><span class="number">1</span> ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 建表之后添加外键约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept2(</span><br><span class="line">dept_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">dept_name <span class="type">VARCHAR</span>(<span class="number">15</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp2(</span><br><span class="line">emp_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">emp_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">department_id <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加外键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp2 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_emp2_dept_id <span class="keyword">FOREIGN</span> KEY(department_id) <span class="keyword">REFERENCES</span> dept2(dept_id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除外键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp2 <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> fk_emp2_dept_id;</span><br><span class="line"><span class="comment">-- 查询索引</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> emp2;</span><br><span class="line"><span class="comment">-- 删除外键约束的索引，通过外键约束的名称删</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp2 <span class="keyword">DROP</span> INDEX fk_emp2_dept_id;</span><br></pre></td></tr></table></figure>

<h4 id="约束等级"><a href="#约束等级" class="headerlink" title="约束等级"></a>约束等级</h4><p>约束等级限制主表修改时，从表是否或者如何同步修改。</p>
<ul>
<li><code>Cascade</code>方式：主表update、delete记录时，同步update、delete从表的匹配记录</li>
<li><code>Set null</code>方式：主表update、delete记录时，从表匹配的列设为null，但是要注意从表的外键列不能为not null</li>
<li><code>No action</code>方式：如果从表中有匹配的记录，则不允许对主表对应候选键进行update、delete操作</li>
<li><code>Restrict</code>方式：同no action，都是立即检查外键约束</li>
<li><code>Set default</code>方式：主表有变更时，从表将外键列设置成一个默认的值，但InnoDB不能识别。</li>
</ul>
<p>如果没有指定等级，相当于<code>Restrict</code>方式。</p>
<p>对于外键约束，最好是采用 <code>ON UPDATE CASCADE,ON DELETE RESTRICT</code>的方式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- on update cascade on deldete set null </span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept3(</span><br><span class="line">dept_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">dept_name <span class="type">VARCHAR</span>(<span class="number">15</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp3(</span><br><span class="line">emp_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">emp_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">department_id <span class="type">int</span>,</span><br><span class="line"><span class="keyword">CONSTRAINT</span> fk_emp3_dept_id <span class="keyword">FOREIGN</span> KEY(department_id) <span class="keyword">REFERENCES</span> dept3(dept_id) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">SET</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept3 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;sh&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp3 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;m&#x27;</span>,<span class="number">1</span>),(<span class="number">2</span>,<span class="string">&#x27;m&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">-- 更新</span></span><br><span class="line"><span class="keyword">UPDATE</span> dept3 <span class="keyword">SET</span> dept_id <span class="operator">=</span> <span class="number">2</span> <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp3; <span class="comment">-- emp3中的department_id变成2</span></span><br><span class="line"><span class="comment">-- 删除</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> dept3 <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp3; <span class="comment">-- emp3中的department_id变成null</span></span><br></pre></td></tr></table></figure>

<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><ul>
<li><p>如果两个表有关系（一对一、一对多），是否一定要用外键约束</p>
<p>不是</p>
</li>
<li><p>建和不建外键约束有什么区别</p>
<p>建外键约束，操作（创建表、删除表、添加、修改、删除）会受到限制。</p>
<p>不建外键约束，操作（创建表、删除表、添加、修改、删除）不会受到限制，但是要保证数据的完整性，只能依靠开发者或是在代码层面限定。</p>
</li>
<li><p>建和不建外键约束和查询有没有关系</p>
<p>没有</p>
</li>
</ul>
<p>MySQL中创建外键约束有成本，在大并发SQL操作外键约束会导致系统开销变得非常慢。</p>
<p>阿里开发约束：【强制】不得使用外键与级联，一切外键概念必须在应用层解决。</p>
<p>级联：例如更新主表的id，从表的外键id也会更新，这就是级联更新。</p>
<p>使用外键和级联更适用于单机低并发，不适合分布式、高并发集群场景。级联更新是强阻塞，存在数据库更新风暴的风险；外键影响数据库的<strong>插入速度</strong>。</p>
<h3 id="检查约束"><a href="#检查约束" class="headerlink" title="检查约束"></a>检查约束</h3><p>CHECK约束，检查某个字段的值是否符合要求，一般是值的范围。MySQL 5.7版本不支持，使用时不起作用。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test10(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line"><span class="comment">-- salary要大于2000</span></span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">CHECK</span>(salary <span class="operator">&gt;</span> <span class="number">2000</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- Check constraint &#x27;test10_chk_1&#x27; is violated.</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test10 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;m&#x27;</span>,<span class="number">1800</span>);</span><br></pre></td></tr></table></figure>

<h3 id="默认值约束"><a href="#默认值约束" class="headerlink" title="默认值约束"></a>默认值约束</h3><p>DEFAULT，给某个字段指定默认值，插入数据时，如果没有显示赋值，则赋值为默认值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test11(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line"><span class="comment">-- salary要大于2000</span></span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="number">2000</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 显式赋值</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test11(id,last_name,salary) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;m&#x27;</span>,<span class="number">3000</span>);</span><br><span class="line"><span class="comment">-- 隐式赋值</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test11(id,last_name) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;m&#x27;</span>);</span><br><span class="line"><span class="comment">-- 直接赋值null时，不会使用default</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test11(id,last_name,salary) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;m&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test11;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 新增约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test12(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line"><span class="comment">-- salary要大于2000</span></span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test12 MODIFY salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="number">2000</span>;</span><br><span class="line"><span class="comment">-- 删除约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test12 MODIFY salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>一般默认值约束会和非空约束联合使用，避免出现<code>null</code>，这是由于<code>NULL</code>值不好比较，只能用<code>is null</code> 或者<code>is not null</code> 比较；另外就是<code>null</code>值效率不高，没法提高索引效率。</p>
<p>推荐阅读：</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/476b52ee4f1b">50道SQL练习题及答案与详细分析</a></p>
<p><a target="_blank" rel="noopener" href="https://www.modb.pro/db/412237">SQL的笛卡尔积</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Alpes/p/mysql57yumysql80guan-yuwithrolluporderby-chu-li-sh.html">mysql5-7与mysql8-0关于with-rollup-order-by处理上的区别 </a></p>
<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/special/tech-java">Java开发手册</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/suifeng3051/article/details/51841176">MySQL数据类型及字段属性</a></p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/10/16/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B9%8B%E7%BD%91%E5%85%B3/" rel="prev" title="微服务之网关">
                  <i class="fa fa-chevron-left"></i> 微服务之网关
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/11/08/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E7%AF%87/" rel="next" title="MySQL学习笔记高级使用篇">
                  MySQL学习笔记高级使用篇 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-changyan">changyan</a></li>
            <li class="tab"><a href="#comment-disqusjs">disqusjs</a></li>
            <li class="tab"><a href="#comment-gitalk">gitalk</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane changyan" id="comment-changyan">
              <div class="comments" id="SOHUCS" sid="52dafd3b449c50b00b756d770f65b90e"></div>
            </div>
            <div class="tab-pane disqusjs" id="comment-disqusjs">
              
  <div class="comments disqusjs-container">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
            </div>
            <div class="tab-pane gitalk" id="comment-gitalk">
              <div class="comments gitalk-container"></div>
            </div>
        </div>
      </div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mitaka xu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/xiaoyeshiyu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.14.3/algoliasearch-lite.umd.js" integrity="sha256-dyJcbGuYfdzNfifkHxYVd/rzeR6SLLcDFYEidcybldM=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/4.51.1/instantsearch.production.min.js" integrity="sha256-y6I4MY/blLHk4a7G33zp97DcnBFRY2iMId4FObo8toI=" crossorigin="anonymous"></script><script src="/js/third-party/search/algolia-search.js"></script>





  


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"TVx6Wkfs8VJGOwYPurtjWY2e-9Nh9j0Va","app_key":"c7VvaRnyF8r3DUIPq1x2KJ7Q","server_url":"https://tvx6wkfs.lc-cn-e1-shared.com","security":true}</script>
  <script src="/js/third-party/statistics/lean-analytics.js"></script>


<script class="next-config" data-name="changyan" type="application/json">{"enable":true,"appid":"cywylq09R","appkey":"144212e4b2486a1d43ffce31b0d7a370","count":true}</script>
<script src="/js/third-party/comments/changyan.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/disqusjs/3.0.2/styles/disqusjs.css" integrity="sha256-71XarXwNr1Td27HmZI9zjY+rMzRdush6/glo6VFXp7o=" crossorigin="anonymous">

<script class="next-config" data-name="disqusjs" type="application/json">{"enable":true,"api":null,"apikey":"CLClshNEb4J4q8Qv18lqsTcfWhmqPD8VyrjgFcPOJFfvEHypfUNIZDdVhnUCPMwk","shortname":"xiaoyeshiyu","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/disqusjs/3.0.2/disqusjs.es2015.umd.min.js","integrity":"sha256-okP99ZQKVpIy7+NogAMpGlIQzJa9XKXhIJcFgdju5bU="}}</script>
<script src="/js/third-party/comments/disqusjs.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"xiaoyeshiyu","repo":"xiaoyeshiyu.github.io","client_id":"8ebf146b6bbf3b76e5b8","client_secret":"ba5d23f1e5b245184fbbe5821450b377e63ab20a","admin_user":"xiaoyeshiyu","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"52dafd3b449c50b00b756d770f65b90e"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
